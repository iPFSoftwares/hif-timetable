{"version":3,"sources":["utils.js","constants.js","SearchEmployees.jsx","SelectActivity.jsx","ActivityPicker.jsx","AddSession.jsx","EditSession.jsx","SessionTile.jsx","SingleEmployeeSchedule.jsx","SpotlightSearch.jsx","App.js","index.js"],"names":["getTimeFromNumber","number","numArray","toString","split","hour","reverse","slice","join","min","padStart","getNumberFromTimeArray","hrs","mins","time","Number","replace","numberTimeDiff","larger","smaller","lh","lm","addMinutesToTime","duration","hours","minutes","totalMinutes","addedHours","Math","floor","getTimeFromRow","row","rowValue","confirmPassword","a","Promise","res","rej","window","localStorage","getItem","showConfirmDialog","onOkay","setItem","onCancel","defaultActivity","useCitySearch","searchTerm","useState","cities","setCities","loading","setLoading","useEffect","trim","isFresh","value","cache","resolve","fetch","then","json","result","SearchEmployees","placeholder","onChange","setSearchTerm","className","onSelect","name","selectedEmployee","find","full_name","event","target","autoFocus","length","map","employee","style","height","src","dp","alt","_id","fetchCities","SelectActivity","searchQuery","onSearchQueryChange","selectedActivity","title","activity","ActivityPicker","setValue","onClick","hourChoices","minuteChoices","EmployeePicker","AddSession","session","onClose","onSave","setEmployee","reviewer","setReviewer","startTime","digit","setStartTime","endTime","setEndTime","description","setDescription","setActivity","setTitle","mutation","useMutation","updatedUser","method","body","JSON","stringify","headers","onSuccess","isLoading","isError","error","isSuccess","data","fill","viewBox","d","e","h","type","startTimeNumber","endTimeNumber","owner","console","log","mutate","EditSession","SessionTile","forAll","onEdit","onDelete","mouseOver","setMouseOver","shiftSelected","setShiftSelected","deleting","setDeleting","selfReview","asReviewer","colStart","round","colEnd","gridArea","canDelete","onLeave","addEventListener","shiftReleased","onShiftSelected","removeEventListener","deleter","onMouseOver","onMouseLeave","_","handleDeleteSession","handleEditSession","fontSize","marginTop","display","alignItems","width","objectFit","borderRadius","dangerouslySetInnerHTML","__html","SingleEmployeeSchedule","sessions","sortedSessions","sort","b","dialogHeight","innerHeight","maxHeight","content","SpotlightSearch","onSelectUser","inputRef","useRef","onShiftUp","key","current","document","fromSpotlight","ref","ScheduleGrid","employees","onSessionsUpdated","selectedUser","setSelectedUser","newSession","setNewSession","sessionBeingEdited","setSessionBeingEdited","spotlightSearch","setSpotlightSearch","allEmployee","userPermissionsInitEvent","CustomEvent","dispatchEvent","setTimeout","onShiftDown","getEmployeeSessions","employeeId","filter","handleOnSaveSession","zIndex","gap","gridTemplateColumns","index","i","border","boxShadow","flex","position","Array","background","handleSetNewSession","user","App","useQuery","color","borderRight","padding","flexShrink","tin_number","refetch","queryClient","QueryClient","ReactDOM","render","client","getElementById"],"mappings":"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","file":"static/js/main.13ddf9ea.chunk.js","sourcesContent":["export const getTimeFromNumber = (number) => {\n    var numArray = number.toString().split('');\n    var hour = [...numArray].reverse().slice(2).reverse().join('');\n    var min = numArray.slice(-2).join('');\n    return `${hour.padStart(2, '0')}:${min.padStart(2, '0')}`;\n}\n\nexport const getNumberFromTimeArray = ([hrs,mins]) => {\n    hrs = hrs.toString().padStart(2, '0');\n    mins = mins.toString().padStart(2, '0');\n    var time = getTimeFromNumber(Number(`${hrs}${mins}`));\n    return Number(time.replace(':', ''));\n}\n\nexport const numberTimeDiff = (larger, smaller) => {\n    let [lh, lm] = getTimeFromNumber(larger).split(\":\");\n    let [sh, sm] = getTimeFromNumber(smaller).split(\":\");\n\n    var hourDiff = lh-sh;\n    var minDiff = lm-sm;\n\n    return (hourDiff*60) + minDiff;\n}\n\nexport const addMinutesToTime = (number, duration) => {\n    var [hours, minutes] = getTimeFromNumber(number).split(\":\");\n    var totalMinutes = Number(minutes)+Number(duration);\n    var addedHours = Math.floor(totalMinutes / 60);\n    hours = (Number(hours) + addedHours).toString();\n    minutes = (totalMinutes % 60).toString();\n    \n    return `${hours.padStart(2, '0')}:${minutes.padStart(2, '0')}`;\n}\n\nexport const getTimeFromRow = (row) => {\n    var number = row - 1;\n    var rowValue = (Math.floor(number / 4) + 8) * 100;\n    rowValue += Math.floor(number % 4) * 15;\n    var [hours, mins] = getTimeFromNumber(rowValue).split(\":\");\n    return `${hours.padStart(2, '0')}:${mins}`;\n}\n\nexport function formatLink(content){\n    const exp_match = /(\\b(https?|):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n    const element_content=content.replace(exp_match, `<a class=\"text-blue-900\" target=\"_blank\" href='$1'>$1</a>`);\n    const new_exp_match =/(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n    return element_content.replace(new_exp_match, '$1<a target=\"_blank\" href=\"http://$2\">$2</a>');\n}\n\nexport async function confirmPassword(){\n    return new Promise((res, rej) => {\n        const passwordSet = window.localStorage.getItem(\"PASSWORD_SET\");\n        if(passwordSet)\n            res(true);\n        else{\n            window.showConfirmDialog(\"HIF-2021\", {\n                onOkay: () => {\n                    window.localStorage.setItem(\"PASSWORD_SET\", true);\n                    res();\n                },\n                onCancel: () => {\n                    rej();\n                },\n            });\n        }\n    });\n}","export const defaultActivity = \"a535186e-5e34-4bc1-872f-d06d7b604613\";","import {\n    Combobox,\n    ComboboxInput,\n    ComboboxPopover,\n    ComboboxList,\n    ComboboxOption\n} from \"@reach/combobox\";\nimport { useEffect, useState } from \"react\";\n\nfunction useCitySearch(searchTerm) {\n  const [cities, setCities] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (searchTerm.trim() !== \"\") {\n      let isFresh = true;\n      setLoading(true);\n      fetchCities(searchTerm).then((cities) => {\n        setLoading(false);\n        if (isFresh) setCities(cities);\n      });\n      return () => (isFresh = false);\n    }\n  }, [searchTerm]);\n\n  return [cities, loading];\n}\n\nconst cache = {};\nfunction fetchCities(value) {\n  if (cache[value])\n    return Promise.resolve(cache[value]);\n    \n  return fetch(\"https://walterkimaro.com/api/Employee/search?q=\" + value)\n    .then((res) => res.json())\n    .then((result) => {\n      cache[value] = result;\n      return result;\n    });\n}\n\nfunction SearchEmployees({placeholder = \"Type to search\", onChange}) {\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [cities, loading] = useCitySearch(searchTerm);\n    const handleSearchTermChange = (event) => {\n      setSearchTerm(event.target.value);\n    };\n    const handleSelect = (name) => {\n      const selectedEmployee= cities.find(({full_name}) => full_name === name);\n      onChange(selectedEmployee);\n    };\n\n    return (\n      <Combobox aria-label=\"Cities\" className=\"w-full\"\n        onSelect={handleSelect}\n      >\n        <ComboboxInput\n          className=\"w-full py-1 px-2 rounded border border-gray-300 focus:outline-none bg-gray-100\"\n          placeholder={placeholder}\n          onChange={handleSearchTermChange}\n          autoFocus\n        />\n        {cities && (\n          <ComboboxPopover className=\"rounded overflow-hidden bg-white shadow-lg border z-20\">\n            {(!loading && cities.length) > 0 ? (\n              <ComboboxList>\n                {cities.map((employee) => {\n                  return (\n                      <ComboboxOption key={employee._id} value={employee.full_name}>\n                          <div className=\"flex items-center px-2 border-t border-gray-300\" style={{height: \"34px\"}}>\n                              <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                                  <img className=\"absolute w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n                              </div>\n                              <span className=\"ml-2 text-sm\">{employee.full_name}</span>\n                          </div>\n                      </ComboboxOption>\n                  );\n                })}\n              </ComboboxList>\n            ) : (\n              <span className=\"block p-3\">\n                { loading ? 'Loading...' : 'No results found' }\n              </span>\n            )}\n          </ComboboxPopover>\n        )}\n      </Combobox>\n    );\n  }\n\nexport default SearchEmployees;","import {\n    Combobox,\n    ComboboxInput,\n    ComboboxPopover,\n    ComboboxList,\n    ComboboxOption\n} from \"@reach/combobox\";\nimport { useEffect, useState } from \"react\";\n\nfunction useCitySearch(searchTerm) {\n  const [cities, setCities] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (searchTerm.trim() !== \"\") {\n      let isFresh = true;\n      setLoading(true);\n      fetchCities(searchTerm).then((cities) => {\n        setLoading(false);\n        if (isFresh) setCities(cities);\n      });\n      return () => (isFresh = false);\n    }\n  }, [searchTerm]);\n\n  return [cities, loading];\n}\n\nconst cache = {};\nfunction fetchCities(value) {\n  if (cache[value]) {\n    return Promise.resolve(cache[value]);\n  }\n  return fetch(\"https://walterkimaro.com/api/SessionType/search?q=\" + value)\n    .then((res) => res.json())\n    .then((result) => {\n      cache[value] = result;\n      return result;\n    });\n}\n\nfunction SelectActivity({placeholder = \"Type to search\", searchQuery = \"\", onSearchQueryChange, onChange}) {\n    const [searchTerm, setSearchTerm] = useState(searchQuery);\n    const [cities, loading] = useCitySearch(searchTerm);\n    const handleSearchTermChange = (event) => {\n      onSearchQueryChange(event.target.value);\n      setSearchTerm(event.target.value);\n    };\n    const handleSelect = (name) => {\n      const selectedActivity= cities.find(({title}) => title === name);\n      onChange(selectedActivity);\n    };\n\n    return (\n      <Combobox aria-label=\"Cities\" className=\"w-full\"\n        onSelect={handleSelect}\n      >\n        <ComboboxInput\n          className=\"w-full py-1 px-2 rounded border border-gray-300 focus:outline-none bg-gray-100\"\n          placeholder={placeholder}\n          value={searchTerm}\n          onChange={handleSearchTermChange}\n          autoFocus\n        />\n        {cities && (\n          <ComboboxPopover className=\"rounded overflow-hidden bg-white shadow-lg border z-20\">\n            {cities.length > 0 \n              ? (\n                <ComboboxList>\n                  {cities.map((activity) => {\n                    return (\n                        <ComboboxOption \n                          key={activity._id} \n                          className=\"px-3 py-2\"\n                          value={activity.title} \n                        />\n                    );\n                  })}\n                </ComboboxList>\n              )\n              : !loading ? null : (\n                <span className=\"block p-3\">\n                  Loading...\n                </span>\n              )\n            }\n          </ComboboxPopover>\n        )}\n      </Combobox>\n    );\n  }\n\nexport default SelectActivity;","import { useEffect, useState } from \"react\";\nimport SelectActivity from \"./SelectActivity\";\n\nfunction ActivityPicker({activity, searchQuery, onSearchQueryChange = () => {}, onChange}){\n    const [value, setValue] = useState(activity);\n    useEffect(() => {\n        if(value && value !== activity)\n            onChange(value);\n    }, [value]);\n\n    return (\n        <>\n            { value && (        \n                <div className=\"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300\" style={{height: \"34px\"}}>\n                    <span className=\"ml-2 text-sm\">{value.title}</span>\n\n                    <button className=\"ml-auto text-blue-900 text-xs p-0\" onClick={() => {setValue(null); onChange(null)}}>\n                        Change\n                    </button>\n                </div>\n            )}\n\n            { !value && \n                <SelectActivity\n                    searchQuery={searchQuery}\n                    onSearchQueryChange={onSearchQueryChange} \n                    onChange={setValue} \n                /> \n            }\n        </>\n    );\n}\n\nexport default ActivityPicker;","import { useEffect, useState } from \"react\";\nimport { addMinutesToTime, getNumberFromTimeArray, getTimeFromNumber, numberTimeDiff } from \"./utils\";\nimport { defaultActivity } from \"./constants\";\nimport SearchEmployees from \"./SearchEmployees\";\nimport ActivityPicker from \"./ActivityPicker\";\nimport { useMutation } from \"react-query\";\n\nconst hourChoices = [8,9,10,11,12,13,14,15,16, 17,18];\nconst minuteChoices = [0, 15, 30, 45];\n\nfunction EmployeePicker({employee, onChange}){\n    const [value, setValue] = useState(employee);\n    useEffect(() => {\n        if(value && value !== employee)\n            onChange(value);\n    }, [value]);\n\n    return (\n        <>\n            { value && (        \n                <div className=\"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300\" style={{height: \"34px\"}}>\n                    <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                        <img className=\"absolute w-full h-full object-cover\" src={value.dp} alt=\"\" />\n                    </div>\n                    <span className=\"ml-2 text-sm\">{value.full_name}</span>\n\n                    <button className=\"ml-auto text-blue-900 text-xs p-0\" onClick={() => setValue(null)}>\n                        Change\n                    </button>\n                </div>\n            )}\n\n            { !value && <SearchEmployees onChange={setValue} /> }\n        </>\n    );\n}\n\nfunction AddSession({ session, onClose, onSave }) {\n    const duration = session.duration || 60;\n    const [employee, setEmployee] = useState(session.employee);\n    const [reviewer, setReviewer] = useState(session.employee);\n    const [startTime, setStartTime] = useState(session.startTime.split(\":\").map(digit => Number(digit)));\n    const [endTime, setEndTime] = useState([8,30]);\n    const [description, setDescription] = useState(\"\");\n    const [activity, setActivity] = useState(null);\n    const [title, setTitle] = useState(\"\");\n\n    const mutation = useMutation((updatedUser) =>\n        fetch('https://walterkimaro.com/api/Session', {\n            method: \"POST\",\n            body: JSON.stringify(updatedUser),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        }\n        ).then(res =>res.json()),\n        {\n            onSuccess: () => {\n                onSave();\n            },\n        }\n    );\n\n    const { isLoading, isError, error, isSuccess, data } = mutation;\n\n    useEffect(() => {\n        setEndTime(addMinutesToTime(Number(session.startTime.replace(\":\", \"\")), duration).split(\":\").map(digit => Number(digit)));\n    }, []);\n\n    function handleSave(){\n        const startTimeNumber = getNumberFromTimeArray(startTime);\n        const endTimeNumber = getNumberFromTimeArray(endTime);\n\n        const data = {\n            time: startTimeNumber,\n            duration: numberTimeDiff(endTimeNumber, startTimeNumber),\n            title,\n            activity: activity ? activity._id : defaultActivity,\n            description,\n            owner: employee._id,\n            reviewer: reviewer._id,\n        };\n\n        // onSave(data);\n        console.log(\"Save session:\", data);\n        mutation.mutate(data);\n    }\n\n    return (\n        <div className=\"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"rounded-md overflow-hidden w-full max-w-sm relative z-10\">\n                <div className=\"relative text-white py-3 px-4 flex items-center justify-between\">\n                    <div className=\"absolute inset-0 bg-blue-900s bg-primary opacity-70\"></div>\n                    \n                    <h3 className=\"font-semibold relative z-10\">\n                        Add Session\n                    </h3>\n\n                    <button className=\"relative z-10 p-1 hover:bg-white hover:bg-opacity-25 rounded-full\" onClick={onClose}>\n                        <svg className=\"w-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" /></svg>\n                    </button>\n                </div>\n\n                <div className=\"bg-white py-3 px-4\">\n                    {\n                        isError && <span>Error saving session: {error}</span>\n                    }\n\n                    <div className=\"mb-3\">\n                        Employee\n\n                        <EmployeePicker employee={employee} onChange={setEmployee} />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Activity\n\n                        <ActivityPicker \n                            activity={activity}\n                            onSearchQueryChange={setTitle}\n                            onChange={setActivity} \n                        />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-1 flex-shrink-0 mr-2\">\n                                <label>Start Time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={startTime[0]} onChange={e => setStartTime([e.target.value, startTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={startTime[1]} onChange={e => setStartTime([startTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 flex-shrink-0\">\n                                <label>End time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={endTime[0]} onChange={e => setEndTime([e.target.value, endTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={endTime[1]} onChange={e => setEndTime([endTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div className=\"mb-2\">\n                        <label>Session Details</label>\n\n                        <textarea type=\"text\" className=\"w-full py-1 px-2 rounded bg-gray-100 border border-gray-300 resize-y\" \n                            value={description}\n                            onChange={e => setDescription(e.target.value)}\n                        ></textarea>\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Reviewer\n\n                        <EmployeePicker employee={reviewer} onChange={setReviewer} />\n                    </div>\n\n                    <div className=\"flex justify-end\">\n                        <button className=\"mt-3 mb-1 text-sm py-1 px-6 rounded-full border border-blue-900 text-blue-900\"\n                            onClick={handleSave}\n                        >\n                            { isLoading ? 'Please Wait...' : 'Save Session' }\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default AddSession;","import { useEffect, useState } from \"react\";\nimport { addMinutesToTime, getNumberFromTimeArray, getTimeFromNumber, numberTimeDiff } from \"./utils\";\nimport SearchEmployees from \"./SearchEmployees\";\nimport SelectActivity from \"./SelectActivity\";\nimport { useMutation } from \"react-query\";\nimport ActivityPicker from \"./ActivityPicker\";\nimport { defaultActivity } from \"./constants\";\n\nconst hourChoices = [8,9,10,11,12,13,14,15,16, 17,18];\nconst minuteChoices = [0, 15, 30, 45];\n\nfunction EmployeePicker({employee, onChange}){\n    const [value, setValue] = useState(employee);\n    useEffect(() => {\n        if(value && value !== employee)\n            onChange(value);\n    }, [value]);\n\n    return (\n        <>\n            { value && (        \n                <div className=\"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300\" style={{height: \"34px\"}}>\n                    <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                        <img className=\"absolute w-full h-full object-cover\" src={value.dp} alt=\"\" />\n                    </div>\n                    <span className=\"ml-2 text-sm\">{value.full_name}</span>\n\n                    <button className=\"ml-auto text-blue-900 text-xs p-0\" onClick={() => setValue(null)}>\n                        Change\n                    </button>\n                </div>\n            )}\n\n            { !value && <SearchEmployees onChange={setValue} /> }\n        </>\n    );\n}\n\nfunction EditSession({ session, onClose, onSave }) {\n    const duration = session.duration;\n    const [employee, setEmployee] = useState(session.owner);\n    const [reviewer, setReviewer] = useState(session.reviewer);\n    const [startTime, setStartTime] = useState(getTimeFromNumber(session.time).split(\":\").map(digit => Number(digit)));\n    const [endTime, setEndTime] = useState([8,30]);\n    const [description, setDescription] = useState(session.description);\n    const [activity, setActivity] = useState(session.activity && session.activity._id !== \"a535186e-5e34-4bc1-872f-d06d7b604613\" ? session.activity : null);\n    const [title, setTitle] = useState(session.title);\n\n    const mutation = useMutation((updatedUser) =>\n        fetch('https://walterkimaro.com/api/Session/' + session._id, {\n            method: \"PATCH\",\n            body: JSON.stringify(updatedUser),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        }\n        ).then(res =>res.json()),\n        {\n            onSuccess: () => {\n                onSave();\n            },\n        }\n    );\n\n    const { isLoading, isError, error, isSuccess, data } = mutation;\n\n    useEffect(() => {\n        const startTime = getTimeFromNumber(session.time).replace(\":\", \"\");\n        setEndTime(addMinutesToTime(Number(startTime), duration).split(\":\").map(digit => Number(digit)));\n    }, []);\n\n    function handleSave(){\n        const startTimeNumber = getNumberFromTimeArray(startTime);\n        const endTimeNumber = getNumberFromTimeArray(endTime);\n\n        const data = {\n            time: startTimeNumber,\n            duration: numberTimeDiff(endTimeNumber, startTimeNumber),\n            title,\n            activity: activity ? activity._id : defaultActivity,\n            description,\n            owner: employee._id,\n            reviewer: reviewer._id,\n        };\n\n        // onSave(data);\n        console.log(\"Save session:\", data);\n        mutation.mutate(data);\n    }\n\n    return (\n        <div className=\"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"rounded-md overflow-hidden w-full max-w-sm relative z-10\">\n                <div className=\"relative text-white py-3 px-4 flex items-center justify-between\">\n                    <div className=\"absolute inset-0 bg-blue-900s bg-primary opacity-70\"></div>\n                    \n                    <h3 className=\"font-semibold relative z-10\">\n                        Edit Session\n                    </h3>\n\n                    <button className=\"relative z-10 p-1 hover:bg-white hover:bg-opacity-25 rounded-full\" onClick={onClose}>\n                        <svg className=\"w-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" /></svg>\n                    </button>\n                </div>\n\n                <div className=\"bg-white py-3 px-4\">\n                    {\n                        isError && <span>Error saving session: {error}</span>\n                    }\n\n                    <div className=\"mb-3\">\n                        Employee\n\n                        <EmployeePicker employee={employee} onChange={setEmployee} />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Activity\n\n                        <ActivityPicker \n                            activity={activity}\n                            searchQuery={title}\n                            onSearchQueryChange={setTitle}\n                            onChange={setActivity} \n                        />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-1 flex-shrink-0 mr-2\">\n                                <label>Start Time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={startTime[0]} onChange={e => setStartTime([e.target.value, startTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={startTime[1]} onChange={e => setStartTime([startTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 flex-shrink-0\">\n                                <label>End time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={endTime[0]} onChange={e => setEndTime([e.target.value, endTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={endTime[1]} onChange={e => setEndTime([endTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div className=\"mb-2\">\n                        <label>Session Details</label>\n\n                        <textarea type=\"text\" className=\"w-full py-1 px-2 rounded bg-gray-100 border border-gray-300 resize-y\" \n                            value={description}\n                            onChange={e => setDescription(e.target.value)}\n                        ></textarea>\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Reviewer\n\n                        <EmployeePicker employee={reviewer} onChange={setReviewer} />\n                    </div>\n\n                    <div className=\"flex justify-end\">\n                        <button className=\"mt-3 mb-1 text-sm py-1 px-6 rounded-full border border-blue-900 text-blue-900\"\n                            onClick={handleSave}\n                        >\n                            { isLoading ? 'Please Wait...' : 'Save Session' }\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default EditSession;","import { useState, useEffect } from \"react\";\nimport { useMutation } from \"react-query\";\nimport { defaultActivity } from \"./constants\";\nimport { addMinutesToTime, confirmPassword, getTimeFromNumber } from \"./utils\";\n\nconst SessionTile = ({ session, employee, forAll = false, onEdit, onDelete }) => {\n    const [mouseOver, setMouseOver] = useState(false);\n    const [shiftSelected, setShiftSelected] = useState(false);\n    const [deleting, setDeleting] = useState(false);\n\n    let selfReview = session.reviewer._id === session.owner._id;\n    let asReviewer = false;\n    if (!selfReview && session.reviewer._id === employee._id)\n        asReviewer = true;\n\n    let rowStart = 1, rowEnd = 1;\n    let timeDiff = Math.round((session.time - 800) / 100) * 100;\n    let colStart = (timeDiff / 25) + 1;\n    colStart += ((session.time - 800) % 100) / 15;\n    let colEnd = colStart + (session.duration / 15);\n    let gridArea = `${rowStart} / ${colStart} / ${rowEnd} / ${colEnd}`;\n\n    const canDelete = mouseOver && shiftSelected;\n\n    let activity = session.activity.title;\n    if(session.activity._id === defaultActivity)\n        activity = session.title;\n\n    const onLeave = activity == \"Leave\";\n\n    useEffect(() => {\n        window.addEventListener(\"shift-released\", shiftReleased, false);\n        window.addEventListener(\"shift-selected\", onShiftSelected, false);\n        return () => {\n            console.log(\"Listener removed from tile\");\n            window.removeEventListener(\"shift-released\", shiftReleased, false);\n            window.removeEventListener(\"shift-selected\", onShiftSelected, false);\n        };\n    }, []);\n\n    const deleter = useMutation(() => fetch('https://walterkimaro.com/api/Session/' + session._id, {\n        method: \"DELETE\",\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    })\n    .then(res =>res.json()), {\n        onSuccess: () => {\n            setDeleting(false);\n            onDelete();\n        },\n    });\n\n    function shiftReleased(e){\n        console.log(\"Shift release captured\");\n        setShiftSelected(false);\n    }\n\n    function onShiftSelected(e){\n        console.log(\"Shift release captured\");\n        setShiftSelected(true);\n    }\n\n    async function handleDeleteSession(){\n        try {\n            await confirmPassword();\n            setDeleting(true);\n            deleter.mutate();\n        } catch (error) {\n        \n        }\n    }\n\n    async function handleEditSession(){\n        try {\n            await confirmPassword();\n            onEdit(session);\n        } catch (error) {\n        \n        }\n    }\n\n    return (\n        <div className={`session-card pointer-events-auto cursor-pointer ${forAll && 'for-all'} bg-primary text-white relative ${onLeave && 'on-leave'} ${deleting && 'animate-pulse'}`} style={{ gridArea }}\n            onMouseOver={(e) => setMouseOver(true)}\n            onMouseLeave={_ => setMouseOver(false)}\n            onClick={_ => canDelete ? handleDeleteSession() : handleEditSession()}\n        >\n            {(canDelete || deleting) &&\n                <div className=\"z-10 bg-red-500 absolute inset-0 flex items-center px-2 text-xs\">\n                    { deleting ? 'Removing Session...' : 'Remove Session' }\n                </div>\n            }\n\n            { !forAll && !onLeave && (\n                <div>\n                    <div className=\"truncate opacity-80\" style={{ fontSize: \"10px\" }}>\n                        {getTimeFromNumber(session.time)} - {addMinutesToTime(session.time, session.duration)}\n                    </div>\n                    <h3 className=\"mt-0.5\">\n                        {asReviewer &&\n                            <span>Review {session.owner.full_name}</span>\n                        }\n                        {!asReviewer && activity}\n                    </h3>\n                    {!selfReview && !asReviewer && (\n                        <div style={{ marginTop: \"0.15rem\", display: \"flex\", alignItems: \"center\", fontSize: \"13px\" }}>\n                            <img style={{ width: \"20px\", height: \"20px\", objectFit: \"cover\", borderRadius: \"50%\" }}\n                                title={'Reviewer: ' + session.reviewer.full_name} src={session.reviewer.dp} alt=\"\"\n                            />\n                        </div>\n                    )}\n                </div>\n            )}\n\n            { forAll && (\n                <div className=\"flex items-center justify-center h-full uppercase font-bold text-lg\">\n                    <span className=\"opacity-20\"\n                        dangerouslySetInnerHTML={{__html: activity.split('').join('</br>') }}\n                    ></span>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default SessionTile;","import { defaultActivity } from \"./constants\";\nimport { addMinutesToTime, formatLink, getTimeFromNumber } from \"./utils\";\n\nfunction SingleEmployeeSchedule({ employee, sessions, onClose }) {\n    const sortedSessions = sessions.sort((a, b) => a.time - b.time);\n    const dialogHeight = Math.min(750, window.innerHeight * 0.85);\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"rounded-lg overflow-y-auto w-full max-w-lg relative z-10\"\n                style={{maxHeight: dialogHeight}}\n            >\n                <div className=\"relative text-white py-3 px-4 flex items-center justify-between\">\n                    <div className=\"absolute inset-0 bg-blue-900s bg-primary opacity-70\"></div>\n                    <div className=\"flex items-center relative z-10\">\n                        <div className=\"border-2 border-opacity-80 relative w-8 h-8 rounded-full overflow-hidden\">\n                            <img className=\"absolute w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n                        </div>\n                        <h3 className=\"ml-3\">{employee.full_name}</h3>\n                    </div>\n\n                    <button className=\"relative z-10 p-1 hover:bg-white hover:bg-opacity-25 rounded-full\" onClick={onClose}>\n                        <svg className=\"w-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" /></svg>\n                    </button>\n                </div>\n\n                <div className=\"bg-white p-3\">\n                    {sortedSessions.map((session) => {\n                        let selfReview = session.reviewer._id === session.owner._id;\n                        let asReviewer = false;\n                        if (!selfReview && session.reviewer._id === employee._id)\n                            asReviewer = true;\n                        \n                        let activity = session.activity.title;\n                        if(session.activity._id === defaultActivity)\n                            activity = session.title;\n\n                        return (\n                            <div key={session._id} className=\"mb-3\">\n                                <div className=\"flex items-start\">\n                                    <span className=\"w-32 ml-2 mr-2 flex-shrink-0 text-blue-900\">\n                                        {getTimeFromNumber(session.time)} - {addMinutesToTime(session.time, session.duration)}\n                                    </span>\n\n                                    <div className=\"flex-1\">\n                                        <h3 className=\"font-semibold\">\n                                            {asReviewer && <span><span className=\"font-normal\">Review</span> {session.owner.full_name}</span>}\n                                            {!asReviewer && activity}\n                                        </h3>\n                                        <p className=\"text-sm opacity-75\"\n                                            dangerouslySetInnerHTML={{__html: formatLink(session.description) }}\n                                        >\n                                            \n                                        </p>\n\n                                        {!selfReview && !asReviewer && (\n                                            <div className=\"flex items-center mt-1\">\n                                                <img style={{ width: \"24px\", height: \"24px\", objectFit: \"cover\", borderRadius: \"50%\" }}\n                                                    title={'Reviewer: ' + session.reviewer.full_name} src={session.reviewer.dp} alt=\"\"\n                                                />\n\n                                                <span className=\"ml-3\">\n                                                    Reviewer: {session.reviewer.full_name}\n                                                </span>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default SingleEmployeeSchedule;","import { useEffect, useRef, useState } from \"react\";\nimport { useMutation } from \"react-query\";\n\nimport {\n    Combobox,\n    ComboboxInput,\n    ComboboxPopover,\n    ComboboxList,\n    ComboboxOption\n} from \"@reach/combobox\";\n\nfunction useCitySearch(searchTerm) {\n    const [cities, setCities] = useState([]);\n    const [loading, setLoading] = useState(false);\n  \n    useEffect(() => {\n      if (searchTerm.trim() !== \"\") {\n        let isFresh = true;\n        setLoading(true);\n        fetchCities(searchTerm).then((cities) => {\n          setLoading(false);\n          if (isFresh) setCities(cities);\n        });\n        return () => (isFresh = false);\n      }\n    }, [searchTerm]);\n  \n    return [cities, loading];\n}\n\nconst cache = {};\nfunction fetchCities(value) {\n  if (cache[value]) {\n    return Promise.resolve(cache[value]);\n  }\n  return fetch(\"https://walterkimaro.com/api/Employee/search?q=\" + value)\n    .then((res) => res.json())\n    .then((result) => {\n      cache[value] = result;\n      return result;\n    });\n}\n\nfunction SpotlightSearch({placeholder = \"Search Employee\", onClose, onSelectUser}) {\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [cities, loading] = useCitySearch(searchTerm);\n    const inputRef = useRef(null);\n\n    useEffect(() => {\n        document.addEventListener(\"keyup\", onShiftUp, false);\n        return () => {\n            document.removeEventListener(\"keyup\", onShiftUp, false);\n        };\n    }, []);\n\n    function onShiftUp(e){\n        if(e.key === \"Escape\"){\n            if(inputRef.current.value.length)\n                setSearchTerm(\"\");\n            else\n                onClose();\n        };\n    }\n    \n    const handleSearchTermChange = (event) => {\n        if(event.target.value === inputRef.current.value)\n          setSearchTerm(event.target.value);\n    };\n\n    const handleSelect = (name) => {\n      const selectedEmployee= cities.find(({full_name}) => full_name === name);\n      onSelectUser({...selectedEmployee, fromSpotlight: true});\n    };\n\n    return (\n        <div className=\"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"overflow-hidden w-full max-w-sm relative z-10\">\n                <div className=\"\">\n                    <Combobox aria-label=\"Cities\" className=\"w-full\"\n                        onSelect={handleSelect}\n                    >\n                        <ComboboxInput\n                            ref={inputRef}\n                            className=\"w-full bg-white py-3 px-4 text-xl rounded border-none bg-transparent focus:outline-none placeholder-gray-300\"\n                            placeholder={placeholder}\n                            value={searchTerm}\n                            onChange={handleSearchTermChange}\n                            autoFocus\n                        />\n                        {cities && (\n                            <ComboboxPopover className=\"-mt-1 bg-white relative rounded-b overflow-hidden bg-white shadow-lg border z-20\">\n                                {cities.length > 0 ? (\n                                <ComboboxList>\n                                    {cities.map((employee) => {\n                                    return (\n                                        <ComboboxOption key={employee._id} value={employee.full_name}>\n                                            <div className=\"flex items-center py-2 px-4 border-b border-gray-100\">\n                                                <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                                                    <img className=\"absolute w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n                                                </div>\n                                                <span className=\"ml-2 text-sm\">{employee.full_name}</span>\n                                            </div>\n                                        </ComboboxOption>\n                                    );\n                                    })}\n                                </ComboboxList>\n                                ) : (\n                                <span className=\"block p-3\">\n                                    { loading ? 'Loading...' : 'No results found' }\n                                </span>\n                                )}\n                            </ComboboxPopover>\n                        )}\n                    </Combobox>\n                </div>\n            </div>\n        </div>\n    );\n  }\n\nexport default SpotlightSearch;","import { useEffect, useState } from 'react';\nimport { useQuery } from 'react-query';\nimport AddSession from './AddSession';\nimport './App.css';\nimport EditSession from './EditSession';\nimport SessionTile from './SessionTile';\nimport SingleEmployeeSchedule from './SingleEmployeeSchedule';\nimport SpotlightSearch from './SpotlightSearch';\nimport { confirmPassword, getTimeFromRow } from './utils';\n\nconst hours = 10;\n\nfunction ScheduleGrid({employees, sessions, onSessionsUpdated}){\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [newSession, setNewSession] = useState(null);\n  const [sessionBeingEdited, setSessionBeingEdited] = useState(null);\n  const [spotlightSearch, setSpotlightSearch] = useState(false);\n  const allEmployee = employees.find(({full_name}) => full_name === \"All\");\n  \n  useEffect(() => {\n    document.addEventListener(\"keyup\", onShiftUp, false);\n    document.addEventListener(\"keydown\", onShiftDown, false);\n    return () => {\n        document.removeEventListener(\"keydown\", onShiftDown, false);\n        document.removeEventListener(\"keyup\", onShiftUp, false);\n    };\n  }, []);\n\n  function onShiftUp(e){\n    if(e.key === \"Shift\"){\n      const userPermissionsInitEvent = new CustomEvent('shift-released');\n      window.dispatchEvent(userPermissionsInitEvent);\n    }\n\n    else if(!newSession && !sessionBeingEdited){\n      if(e.key === \"/\")\n          setSpotlightSearch(true);\n      else if(e.key === \"Escape\"){\n        if(selectedUser && selectedUser.fromSpotlight){\n          setSpotlightSearch(true);\n          setTimeout(() => setSelectedUser(null), 20);\n        }\n        else\n          setSelectedUser(null);\n      }\n    }\n  }\n\n  function onShiftDown(e){\n    if(e.key === \"Shift\"){\n      const userPermissionsInitEvent = new CustomEvent('shift-selected');\n      window.dispatchEvent(userPermissionsInitEvent);\n    }\n  }\n\n  function getEmployeeSessions(employeeId){\n    if(!sessions || !sessions.length)\n      return [];\n\n    return sessions.filter(session => {\n      return session.owner._id === employeeId || session.reviewer._id === employeeId;\n    });\n  }\n\n  async function handleSetNewSession(session){\n    try {\n      await confirmPassword();\n      setNewSession(session);\n    } catch (error) {\n      \n    }\n  }\n\n  function handleOnSaveSession(){\n    setNewSession(null);\n    setSessionBeingEdited(null);\n    onSessionsUpdated();\n  }\n\n  return (\n    <>\n      <div className=\"pointer-events-none fixed inset-0 h-screen flex\" style={{zIndex: 3}}>\n        <div className=\"employee-title cursor-pointer\">\n          <span className=\"opacity-0\">All</span>\n        </div>\n\n        <div className=\"flex-1 grid h-full\" style={{gap: \"1px\", gridTemplateColumns: `repeat(${hours * 4}, 1fr)`}}>\n          {\n            getEmployeeSessions(allEmployee._id).map((session, index) => {\n              return (\n                <SessionTile \n                  key={index}\n                  forAll \n                  employee={allEmployee._id} \n                  session={session} \n                  onEdit={setSessionBeingEdited}\n                  onDelete={handleOnSaveSession}\n                />\n              );\n            })\n          }\n        </div>\n      </div>\n      {\n        employees.filter(({full_name}) => full_name !== \"All\").map((e, i) => (\n          <div key={e._id} style={{display: 'flex', border: \"2px solid #f5f5f5\"}}>\n            <div className=\"employee-title hover:bg-gray-200 cursor-pointer\" onClick={() => setSelectedUser(e)}>\n              <img style={{width: \"20px\", height: \"20px\", objectFit: \"cover\", borderRadius: \"50%\", boxShadow: \"0 0 1px rgba(0, 0, 0, 0.26)\"}} \n                title={'Reviewer: ' + e.full_name} src={e.dp} alt=\"\" \n              />\n              <span>{e.full_name}</span>\n            </div>\n            <div style={{flex: 1, position: \"relative\"}}>\n              <div className=\"grid h-full\" style={{gap: \"1px\", gridTemplateColumns: `repeat(${hours * 4}, 1fr)`}}>\n                {\n                  Array(hours*4).fill(12).map((_, i) => (\n                    <div key={i} style={{display: 'flex', background: \"#eee\", position: 'relative'}}\n                      className=\"cursor-pointer\"\n                      // onClick={() => {console.log(\"Add new session: \", {employee: e, startTime: getTimeFromRow(i+1)});}}\n                      onClick={() => handleSetNewSession({employee: e, startTime: getTimeFromRow(i+1)})}\n                    >\n                      {/* <span style={{position: \"absolute\"}}>{ i + 1 }</span> */}\n                    </div>\n                  ))\n                }\n              </div>\n\n              <div className=\"absolute inset-0 grid pointer-events-none\" style={{background: \"rgba(0, 0, 0, 0.01)\", gap: \"1px\", gridTemplateColumns: `repeat(${hours * 4}, 1fr)`}}>\n                {\n                  getEmployeeSessions(e._id).map((session, index) => {\n                    return (\n                      <SessionTile \n                        key={index} \n                        employee={e} \n                        session={session} \n                        onEdit={setSessionBeingEdited}\n                        onDelete={handleOnSaveSession}\n                      />\n                    );\n                  })\n                }\n              </div>\n            </div>\n          </div>\n        ))}\n\n        { selectedUser && (\n            <SingleEmployeeSchedule \n              employee={selectedUser}\n              sessions={getEmployeeSessions(selectedUser._id)}\n              onClose={_ => setSelectedUser(null)}\n            />\n          )\n        }\n\n        { newSession && (\n            <AddSession \n              session={newSession}\n              onClose={_ => setNewSession(null)}\n              onSave={handleOnSaveSession}\n            />\n          )\n        }\n\n        { sessionBeingEdited && (\n            <EditSession \n              session={sessionBeingEdited}\n              onClose={_ => setSessionBeingEdited(null)}\n              onSave={handleOnSaveSession}\n            />\n          )\n        }\n        \n        { spotlightSearch && (\n            <SpotlightSearch \n              onSelectUser={user => {setSpotlightSearch(false); setSelectedUser(user)}}\n              onClose={_ => setSpotlightSearch(false)}\n            />\n          )\n        }\n    </>\n  );\n}\n\nfunction App() {\n  const {isLoading, error, data} = useQuery('employeeList', () =>\n    fetch('https://walterkimaro.com/api/Employee').then(res =>\n      res.json()\n    )\n  );\n\n  const sessions = useQuery('sessions', () =>\n    fetch('https://walterkimaro.com/api/Session').then(res =>\n      res.json()\n    )\n  );\n\n  if (isLoading || sessions.isLoading) return 'Loading...';\n\n  return (\n    <div>\n      <div className=\"sticky top-0\" style={{display: 'flex', background: \"#fff\", color: \"white\", zIndex: 5}}>\n        <div style={{background:\"#333\", borderRight: \"1px solid #fff\", padding: '0.25rem', width: '90px', flexShrink: 0}}>\n          {/* Person / Time */}\n        </div>\n        <div style={{flex: 1, display: 'grid', gap: \"1px\", gridTemplateColumns: `repeat(${hours}, 1fr)`}}>\n          {\n            Array(hours).fill(11).map((_, i) => (\n              <div key={i} style={{display: 'flex', background: \"#333\", padding: '0.25rem'}}>\n                { 8 + i}:00\n              </div>\n            ))\n          }\n        </div>\n      </div>\n\n      <ScheduleGrid \n        employees={data.sort((a, b) => a.tin_number - b.tin_number)}\n        sessions={sessions.data} \n        onSessionsUpdated={() => sessions.refetch() }\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { QueryClient, QueryClientProvider } from 'react-query'\n \n const queryClient = new QueryClient();\n\n\nReactDOM.render(\n  // <React.StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <App />\n     </QueryClientProvider>\n  // </React.StrictMode>,\n  , document.getElementById('root')\n);"],"sourceRoot":""}