{"version":3,"sources":["utils.js","constants.js","DesktopApp/SearchEmployees.jsx","DesktopApp/SelectActivity.jsx","DesktopApp/ActivityPicker.jsx","DesktopApp/AddSession.jsx","DesktopApp/EditSession.jsx","DesktopApp/SessionTile.jsx","DesktopApp/SingleEmployeeSchedule.jsx","DesktopApp/SpotlightSearch.jsx","DesktopApp/index.jsx","useColorThief.js","MobileApp/SessionCard.jsx","MobileApp/EmployeeCard.jsx","MobileApp/index.jsx","useMediaQuery.js","index.js"],"names":["getTimeFromNumber","number","numArray","toString","split","hour","reverse","slice","join","min","padStart","getNumberFromTimeArray","hrs","mins","time","Number","replace","numberTimeDiff","larger","smaller","lh","lm","addMinutesToTime","duration","hours","minutes","totalMinutes","addedHours","Math","floor","getTimeFromRow","row","rowValue","formatLink","content","confirmPassword","a","Promise","res","rej","window","localStorage","getItem","showConfirmDialog","onOkay","setItem","onCancel","getEmployeeSessions","sessions","employeeId","length","filter","session","owner","_id","reviewer","BASE_URL","defaultActivity","useCitySearch","searchTerm","useState","cities","setCities","loading","setLoading","useEffect","trim","isFresh","value","cache","resolve","fetch","then","json","result","SearchEmployees","placeholder","onChange","setSearchTerm","className","onSelect","name","selectedEmployee","find","full_name","event","target","autoFocus","map","employee","style","height","src","dp","alt","fetchCities","SelectActivity","searchQuery","onSearchQueryChange","selectedActivity","title","activity","ActivityPicker","setValue","onClick","hourChoices","minuteChoices","EmployeePicker","AddSession","onClose","onSave","setEmployee","setReviewer","startTime","digit","setStartTime","endTime","setEndTime","description","setDescription","setActivity","setTitle","mutation","useMutation","updatedUser","method","body","JSON","stringify","headers","onSuccess","isLoading","isError","error","isSuccess","data","fill","viewBox","d","e","h","type","startTimeNumber","endTimeNumber","console","log","mutate","EditSession","SessionTile","forAll","onEdit","onDelete","mouseOver","setMouseOver","shiftSelected","setShiftSelected","deleting","setDeleting","selfReview","asReviewer","colStart","round","colEnd","gridArea","canDelete","onLeave","addEventListener","shiftReleased","onShiftSelected","removeEventListener","deleter","onMouseOver","onMouseLeave","_","handleDeleteSession","handleEditSession","fontSize","marginTop","display","alignItems","width","objectFit","borderRadius","dangerouslySetInnerHTML","__html","SingleEmployeeSchedule","sortedSessions","sort","b","dialogHeight","innerHeight","maxHeight","SpotlightSearch","onSelectUser","inputRef","useRef","onShiftUp","key","current","document","fromSpotlight","ref","ScheduleGrid","employees","onSessionsUpdated","selectedUser","setSelectedUser","newSession","setNewSession","sessionBeingEdited","setSessionBeingEdited","spotlightSearch","setSpotlightSearch","allEmployee","userPermissionsInitEvent","CustomEvent","dispatchEvent","setTimeout","onShiftDown","handleOnSaveSession","zIndex","gap","gridTemplateColumns","index","i","border","boxShadow","flex","position","Array","background","handleSetNewSession","user","App","useQuery","color","borderRight","padding","flexShrink","tin_number","refetch","useColorThief","url","setColor","reject","image","Image","crossOrigin","onload","ColorThief","getColor","this","getPalette","catch","SessionCard","EmployeeCard","employeeSessions","expanded","setExpanded","MobileApp","searching","setSearching","setSearchQuery","employeeList","toLowerCase","indexOf","searchIndex","useMediaQuery","query","matches","setMatches","media","matchMedia","listener","queryClient","QueryClient","Schedule","DesktopApp","ReactDOM","render","client","getElementById"],"mappings":"4NAAaA,EAAoB,SAACC,GAC9B,IAAIC,EAAWD,EAAOE,WAAWC,MAAM,IACnCC,EAAO,YAAIH,GAAUI,UAAUC,MAAM,GAAGD,UAAUE,KAAK,IACvDC,EAAMP,EAASK,OAAO,GAAGC,KAAK,IAClC,MAAM,GAAN,OAAUH,EAAKK,SAAS,EAAG,KAA3B,YAAmCD,EAAIC,SAAS,EAAG,OAG1CC,EAAyB,SAAC,GAAgB,IAAD,mBAAdC,EAAc,KAAVC,EAAU,KAClDD,EAAMA,EAAIT,WAAWO,SAAS,EAAG,KACjCG,EAAOA,EAAKV,WAAWO,SAAS,EAAG,KACnC,IAAII,EAAOd,EAAkBe,OAAO,GAAD,OAAIH,GAAJ,OAAUC,KAC7C,OAAOE,OAAOD,EAAKE,QAAQ,IAAK,MAGvBC,EAAiB,SAACC,EAAQC,GACnC,MAAenB,EAAkBkB,GAAQd,MAAM,KAA/C,mBAAKgB,EAAL,KAASC,EAAT,KACA,EAAerB,EAAkBmB,GAASf,MAAM,KAAhD,mBAKA,OAAiB,IAHFgB,EAFf,OAGcC,EAHd,OAQSC,EAAmB,SAACrB,EAAQsB,GACrC,IAAI,EAAmBvB,EAAkBC,GAAQG,MAAM,KAAvD,mBAAKoB,EAAL,KAAYC,EAAZ,KACIC,EAAeX,OAAOU,GAASV,OAAOQ,GACtCI,EAAaC,KAAKC,MAAMH,EAAe,IAI3C,OAHAF,GAAST,OAAOS,GAASG,GAAYxB,WACrCsB,GAAWC,EAAe,IAAIvB,WAExB,GAAN,OAAUqB,EAAMd,SAAS,EAAG,KAA5B,YAAoCe,EAAQf,SAAS,EAAG,OAG/CoB,EAAiB,SAACC,GAC3B,IAAI9B,EAAS8B,EAAM,EACfC,EAA0C,KAA9BJ,KAAKC,MAAM5B,EAAS,GAAK,GACzC+B,GAAqC,GAAzBJ,KAAKC,MAAM5B,EAAS,GAChC,IAAI,EAAgBD,EAAkBgC,GAAU5B,MAAM,KAAtD,mBAAKoB,EAAL,KAAYX,EAAZ,KACA,MAAM,GAAN,OAAUW,EAAMd,SAAS,EAAG,KAA5B,YAAoCG,IAGjC,SAASoB,EAAWC,GAIvB,OAFsBA,EAAQlB,QADZ,sEACI,+DAECA,QADF,iCACyB,gDAG3C,SAAemB,IAAtB,+B,4CAAO,sBAAAC,EAAA,+EACI,IAAIC,SAAQ,SAACC,EAAKC,GACDC,OAAOC,aAAaC,QAAQ,gBAE5CJ,GAAI,GAEJE,OAAOG,kBAAkB,WAAY,CACjCC,OAAQ,WACJJ,OAAOC,aAAaI,QAAQ,gBAAgB,GAC5CP,KAEJQ,SAAU,WACNP,WAZb,4C,sBAmBA,SAASQ,EAAoBC,EAAUC,GAC1C,OAAID,GAAaA,EAASE,OAGnBF,EAASG,QAAO,SAAAC,GACrB,OAAOA,EAAQC,MAAMC,MAAQL,GAAcG,EAAQG,SAASD,MAAQL,KAH7D,GCtEN,IAAMO,EAAW,+BACXC,EAAkB,uC,cCS/B,SAASC,EAAcC,GACrB,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KAcA,OAZAC,qBAAU,WACR,GAA0B,KAAtBN,EAAWO,OAAe,CAC5B,IAAIC,GAAU,EAMd,OALAH,GAAW,IAaII,EAZHT,EAaZU,EAAMD,GACD/B,QAAQiC,QAAQD,EAAMD,IAExBG,MAAM,GAAD,OAAIf,EAAJ,8BAAkCY,IAC3CI,MAAK,SAAClC,GAAD,OAASA,EAAImC,UAClBD,MAAK,SAACE,GAEL,OADAL,EAAMD,GAASM,EACRA,MApBiBF,MAAK,SAACX,GAC5BG,GAAW,GACPG,GAASL,EAAUD,MAElB,kBAAOM,GAAU,GAQ9B,IAAqBC,IANhB,CAACT,IAEG,CAACE,EAAQE,GAGlB,IAAMM,EAAQ,GA8DCM,MAjDf,YAAsE,IAAD,IAA3CC,mBAA2C,MAA7B,iBAA6B,EAAXC,EAAW,EAAXA,SACtD,EAAoCjB,mBAAS,IAA7C,mBAAOD,EAAP,KAAmBmB,EAAnB,KACA,EAA0BpB,EAAcC,GAAxC,mBAAOE,EAAP,KAAeE,EAAf,KASA,OACE,eAAC,IAAD,CAAU,aAAW,SAASgB,UAAU,SACtCC,SAPiB,SAACC,GACpB,IAAMC,EAAkBrB,EAAOsB,MAAK,qBAAEC,YAA6BH,KACnEJ,EAASK,IAIT,UAGE,cAAC,IAAD,CACEH,UAAU,iFACVH,YAAaA,EACbC,SAfyB,SAACQ,GAC9BP,EAAcO,EAAMC,OAAOlB,QAevBmB,WAAS,IAEV1B,GACC,cAAC,IAAD,CAAiBkB,UAAU,yDAA3B,WACKhB,GAAWF,EAAOX,QAAU,EAC7B,cAAC,IAAD,UACGW,EAAO2B,KAAI,SAACC,GACX,OACI,cAAC,IAAD,CAAmCrB,MAAOqB,EAASL,UAAnD,SACI,sBAAKL,UAAU,kDAAkDW,MAAO,CAACC,OAAQ,QAAjF,UACI,qBAAKZ,UAAU,uDAAf,SACI,qBAAKA,UAAU,sCAAsCa,IAAKH,EAASI,GAAIC,IAAI,OAE/E,sBAAMf,UAAU,eAAhB,SAAgCU,EAASL,gBAL5BK,EAASnC,UAYtC,sBAAMyB,UAAU,YAAhB,SACIhB,EAAU,aAAe,2BCxE3C,SAASL,EAAcC,GACrB,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KAcA,OAZAC,qBAAU,WACR,GAA0B,KAAtBN,EAAWO,OAAe,CAC5B,IAAIC,GAAU,EAMd,OALAH,GAAW,GAajB,SAAqBI,GACnB,GAAIC,EAAMD,GACR,OAAO/B,QAAQiC,QAAQD,EAAMD,IAE/B,OAAOG,MAAM,GAAD,OAAIf,EAAJ,iCAAqCY,IAC9CI,MAAK,SAAClC,GAAD,OAASA,EAAImC,UAClBD,MAAK,SAACE,GAEL,OADAL,EAAMD,GAASM,EACRA,KApBPqB,CAAYpC,GAAYa,MAAK,SAACX,GAC5BG,GAAW,GACPG,GAASL,EAAUD,MAElB,kBAAOM,GAAU,MAEzB,CAACR,IAEG,CAACE,EAAQE,GAGlB,IAAMM,EAAQ,GAgEC2B,MAnDf,YAA4G,IAAD,IAAlFpB,mBAAkF,MAApE,iBAAoE,MAAlDqB,mBAAkD,MAApC,GAAoC,EAAhCC,EAAgC,EAAhCA,oBAAqBrB,EAAW,EAAXA,SAC5F,EAAoCjB,mBAASqC,GAA7C,mBAAOtC,EAAP,KAAmBmB,EAAnB,KACA,EAA0BpB,EAAcC,GAAxC,mBAAOE,EAAP,KAAeE,EAAf,KAUA,OACE,eAAC,IAAD,CAAU,aAAW,SAASgB,UAAU,SACtCC,SAPiB,SAACC,GACpB,IAAMkB,EAAkBtC,EAAOsB,MAAK,qBAAEiB,QAAqBnB,KAC3DJ,EAASsB,IAIT,UAGE,cAAC,IAAD,CACEpB,UAAU,iFACVH,YAAaA,EACbR,MAAOT,EACPkB,SAjByB,SAACQ,GAC9Ba,EAAoBb,EAAMC,OAAOlB,OACjCU,EAAcO,EAAMC,OAAOlB,QAgBvBmB,WAAS,IAEV1B,GACC,cAAC,IAAD,CAAiBkB,UAAU,yDAA3B,SACGlB,EAAOX,OAAS,EAEb,cAAC,IAAD,UACGW,EAAO2B,KAAI,SAACa,GACX,OACI,cAAC,IAAD,CAEEtB,UAAU,YACVX,MAAOiC,EAASD,OAFXC,EAAS/C,UAQvBS,EACD,sBAAMgB,UAAU,YAAhB,wBADW,WChDZuB,MA9Bf,YAA2F,IAAlED,EAAiE,EAAjEA,SAAUJ,EAAuD,EAAvDA,YAAuD,IAA1CC,2BAA0C,MAApB,aAAoB,EAAVrB,EAAU,EAAVA,SAC5E,EAA0BjB,mBAASyC,GAAnC,mBAAOjC,EAAP,KAAcmC,EAAd,KAMA,OALAtC,qBAAU,WACHG,GAASA,IAAUiC,GAClBxB,EAAST,KACd,CAACA,IAGA,qCACMA,GACE,sBAAKW,UAAU,kFAAkFW,MAAO,CAACC,OAAQ,QAAjH,UACI,sBAAMZ,UAAU,eAAhB,SAAgCX,EAAMgC,QAEtC,wBAAQrB,UAAU,oCAAoCyB,QAAS,WAAOD,EAAS,MAAO1B,EAAS,OAA/F,wBAMLT,GACC,cAAC,EAAD,CACI6B,YAAaA,EACbC,oBAAqBA,EACrBrB,SAAU0B,QCnBxBE,EAAc,CAAC,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,GAAG,IAC5CC,EAAgB,CAAC,EAAG,GAAI,GAAI,IAElC,SAASC,EAAT,GAA8C,IAArBlB,EAAoB,EAApBA,SAAUZ,EAAU,EAAVA,SAC/B,EAA0BjB,mBAAS6B,GAAnC,mBAAOrB,EAAP,KAAcmC,EAAd,KAMA,OALAtC,qBAAU,WACHG,GAASA,IAAUqB,GAClBZ,EAAST,KACd,CAACA,IAGA,qCACMA,GACE,sBAAKW,UAAU,kFAAkFW,MAAO,CAACC,OAAQ,QAAjH,UACI,qBAAKZ,UAAU,uDAAf,SACI,qBAAKA,UAAU,sCAAsCa,IAAKxB,EAAMyB,GAAIC,IAAI,OAE5E,sBAAMf,UAAU,eAAhB,SAAgCX,EAAMgB,YAEtC,wBAAQL,UAAU,oCAAoCyB,QAAS,kBAAMD,EAAS,OAA9E,wBAMLnC,GAAS,cAAC,EAAD,CAAiBS,SAAU0B,OA4KpCK,MAvKf,YAAmD,IAA7BxD,EAA4B,EAA5BA,QAASyD,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OAC9BvF,EAAW6B,EAAQ7B,UAAY,GACrC,EAAgCqC,mBAASR,EAAQqC,UAAjD,mBAAOA,EAAP,KAAiBsB,EAAjB,KACA,EAAgCnD,mBAASR,EAAQqC,UAAjD,mBAAOlC,EAAP,KAAiByD,EAAjB,KACA,EAAkCpD,mBAASR,EAAQ6D,UAAU7G,MAAM,KAAKoF,KAAI,SAAA0B,GAAK,OAAInG,OAAOmG,OAA5F,mBAAOD,EAAP,KAAkBE,EAAlB,KACA,EAA8BvD,mBAAS,CAAC,EAAE,KAA1C,mBAAOwD,EAAP,KAAgBC,EAAhB,KACA,EAAsCzD,mBAAS,IAA/C,mBAAO0D,EAAP,KAAoBC,EAApB,KACA,EAAgC3D,mBAAS,MAAzC,mBAAOyC,EAAP,KAAiBmB,EAAjB,KACA,EAA0B5D,mBAAS,IAAnC,mBAAOwC,EAAP,KAAcqB,EAAd,KAEMC,EAAWC,uBAAY,SAACC,GAAD,OACzBrD,MAAM,GAAD,OAAIf,EAAJ,YAAyB,CAC1BqE,OAAQ,OACRC,KAAMC,KAAKC,UAAUJ,GACrBK,QAAS,CACL,eAAgB,sBAGtBzD,MAAK,SAAAlC,GAAG,OAAGA,EAAImC,YACjB,CACIyD,UAAW,WACPpB,OAKJqB,EAA+CT,EAA/CS,UAAWC,EAAoCV,EAApCU,QAASC,EAA2BX,EAA3BW,MAyB5B,OAzBuDX,EAApBY,UAAoBZ,EAATa,KAE9CtE,qBAAU,WACNoD,EAAW/F,EAAiBP,OAAOqC,EAAQ6D,UAAUjG,QAAQ,IAAK,KAAMO,GAAUnB,MAAM,KAAKoF,KAAI,SAAA0B,GAAK,OAAInG,OAAOmG,SAClH,IAsBC,sBAAKnC,UAAU,6FAAf,UACI,qBAAKA,UAAU,gBAAgByB,QAASK,IAGxC,sBAAK9B,UAAU,2DAAf,UACI,sBAAKA,UAAU,kEAAf,UACI,qBAAKA,UAAU,wDAEf,oBAAIA,UAAU,8BAAd,yBAIA,wBAAQA,UAAU,oEAAoEyB,QAASK,EAA/F,SACI,qBAAK9B,UAAU,MAAMyD,KAAK,eAAeC,QAAQ,YAAjD,SAA6D,sBAAMC,EAAE,2LAI7E,sBAAK3D,UAAU,qBAAf,UAEQqD,GAAW,0DAA6BC,KAG5C,sBAAKtD,UAAU,OAAf,qBAGI,cAAC4B,EAAD,CAAgBlB,SAAUA,EAAUZ,SAAUkC,OAGlD,sBAAKhC,UAAU,OAAf,qBAGI,cAAC,EAAD,CACIsB,SAAUA,EACVH,oBAAqBuB,EACrB5C,SAAU2C,OAIlB,qBAAKzC,UAAU,OAAf,SACI,sBAAKA,UAAU,oBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,+CAEA,sBAAKA,UAAU,2EAA2EW,MAAO,CAACC,OAAQ,QAA1G,UACI,wBAAQZ,UAAU,GAAGX,MAAO6C,EAAU,GAAIpC,SAAU,SAAA8D,GAAC,OAAIxB,EAAa,CAACwB,EAAErD,OAAOlB,MAAO6C,EAAU,MAAjG,SAEQR,EAAYjB,KAAI,SAAAoD,GAAC,OACb,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,QAIzB,sBAAM7D,UAAU,qBAAhB,eACA,wBAAQA,UAAU,MAAMX,MAAO6C,EAAU,GAAIpC,SAAU,SAAA8D,GAAC,OAAIxB,EAAa,CAACF,EAAU,GAAI0B,EAAErD,OAAOlB,SAAjG,SAEQsC,EAAclB,KAAI,SAAAoD,GAAC,OACf,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,cAOjC,sBAAK7D,UAAU,uBAAf,UACI,6CAEA,sBAAKA,UAAU,2EAA2EW,MAAO,CAACC,OAAQ,QAA1G,UACI,wBAAQZ,UAAU,GAAGX,MAAOgD,EAAQ,GAAIvC,SAAU,SAAA8D,GAAC,OAAItB,EAAW,CAACsB,EAAErD,OAAOlB,MAAOgD,EAAQ,MAA3F,SAEQX,EAAYjB,KAAI,SAAAoD,GAAC,OACb,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,QAIzB,sBAAM7D,UAAU,qBAAhB,eACA,wBAAQA,UAAU,MAAMX,MAAOgD,EAAQ,GAAIvC,SAAU,SAAA8D,GAAC,OAAItB,EAAW,CAACD,EAAQ,GAAIuB,EAAErD,OAAOlB,SAA3F,SAEQsC,EAAclB,KAAI,SAAAoD,GAAC,OACf,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,mBAUzC,sBAAK7D,UAAU,OAAf,UACI,oDAEA,0BAAU8D,KAAK,OAAO9D,UAAU,uEAC5BX,MAAOkD,EACPzC,SAAU,SAAA8D,GAAC,OAAIpB,EAAeoB,EAAErD,OAAOlB,aAI/C,sBAAKW,UAAU,OAAf,qBAGI,cAAC4B,EAAD,CAAgBlB,SAAUlC,EAAUsB,SAAUmC,OAGlD,qBAAKjC,UAAU,mBAAf,SACI,wBAAQA,UAAU,gFACdyB,QA5HxB,WACI,IAAMsC,EAAkBnI,EAAuBsG,GACzC8B,EAAgBpI,EAAuByG,GAEvCmB,EAAO,CACTzH,KAAMgI,EACNvH,SAAUN,EAAe8H,EAAeD,GACxC1C,QACAC,SAAUA,EAAWA,EAAS/C,IAAMG,EACpC6D,cACAjE,MAAOoC,EAASnC,IAChBC,SAAUA,EAASD,KAIvB0F,QAAQC,IAAI,gBAAiBV,GAC7Bb,EAASwB,OAAOX,IA2GA,SAGMJ,EAAY,iBAAmB,6BC5LvD1B,G,MAAc,CAAC,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,GAAG,KAC5CC,EAAgB,CAAC,EAAG,GAAI,GAAI,IAElC,SAASC,EAAT,GAA8C,IAArBlB,EAAoB,EAApBA,SAAUZ,EAAU,EAAVA,SAC/B,EAA0BjB,mBAAS6B,GAAnC,mBAAOrB,EAAP,KAAcmC,EAAd,KAMA,OALAtC,qBAAU,WACHG,GAASA,IAAUqB,GAClBZ,EAAST,KACd,CAACA,IAGA,qCACMA,GACE,sBAAKW,UAAU,kFAAkFW,MAAO,CAACC,OAAQ,QAAjH,UACI,qBAAKZ,UAAU,uDAAf,SACI,qBAAKA,UAAU,sCAAsCa,IAAKxB,EAAMyB,GAAIC,IAAI,OAE5E,sBAAMf,UAAU,eAAhB,SAAgCX,EAAMgB,YAEtC,wBAAQL,UAAU,oCAAoCyB,QAAS,kBAAMD,EAAS,OAA9E,wBAMLnC,GAAS,cAAC,EAAD,CAAiBS,SAAU0B,OA6KpC4C,MAxKf,YAAoD,IAA7B/F,EAA4B,EAA5BA,QAASyD,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OAC/BvF,EAAW6B,EAAQ7B,SACzB,EAAgCqC,mBAASR,EAAQC,OAAjD,mBAAOoC,EAAP,KAAiBsB,EAAjB,KACA,EAAgCnD,mBAASR,EAAQG,UAAjD,mBAAOA,EAAP,KAAiByD,EAAjB,KACA,EAAkCpD,mBAAS5D,EAAkBoD,EAAQtC,MAAMV,MAAM,KAAKoF,KAAI,SAAA0B,GAAK,OAAInG,OAAOmG,OAA1G,mBAAOD,EAAP,KAAkBE,EAAlB,KACA,EAA8BvD,mBAAS,CAAC,EAAE,KAA1C,mBAAOwD,EAAP,KAAgBC,EAAhB,KACA,EAAsCzD,mBAASR,EAAQkE,aAAvD,mBAAOA,EAAP,KAAoBC,EAApB,KACA,EAAgC3D,mBAASR,EAAQiD,UAAqC,yCAAzBjD,EAAQiD,SAAS/C,IAAiDF,EAAQiD,SAAW,MAAlJ,mBAAOA,EAAP,KAAiBmB,EAAjB,KACA,EAA0B5D,mBAASR,EAAQgD,OAA3C,mBAAOA,EAAP,KAAcqB,EAAd,KAEMC,EAAWC,uBAAY,SAACC,GAAD,OACzBrD,MAAM,GAAD,OAAIf,EAAJ,oBAAwBJ,EAAQE,KAAO,CACxCuE,OAAQ,QACRC,KAAMC,KAAKC,UAAUJ,GACrBK,QAAS,CACL,eAAgB,sBAGvBzD,MAAK,SAAAlC,GAAG,OAAGA,EAAImC,YAAQ,CACpByD,UAAW,WACPpB,OAKJqB,EAA+CT,EAA/CS,UAAWC,EAAoCV,EAApCU,QAASC,EAA2BX,EAA3BW,MA0B5B,OA1BuDX,EAApBY,UAAoBZ,EAATa,KAE9CtE,qBAAU,WACN,IAAMgD,EAAYjH,EAAkBoD,EAAQtC,MAAME,QAAQ,IAAK,IAC/DqG,EAAW/F,EAAiBP,OAAOkG,GAAY1F,GAAUnB,MAAM,KAAKoF,KAAI,SAAA0B,GAAK,OAAInG,OAAOmG,SACzF,IAsBC,sBAAKnC,UAAU,6FAAf,UACI,qBAAKA,UAAU,gBAAgByB,QAASK,IAGxC,sBAAK9B,UAAU,2DAAf,UACI,sBAAKA,UAAU,kEAAf,UACI,qBAAKA,UAAU,wDAEf,oBAAIA,UAAU,8BAAd,0BAIA,wBAAQA,UAAU,oEAAoEyB,QAASK,EAA/F,SACI,qBAAK9B,UAAU,MAAMyD,KAAK,eAAeC,QAAQ,YAAjD,SAA6D,sBAAMC,EAAE,2LAI7E,sBAAK3D,UAAU,qBAAf,UAEQqD,GAAW,0DAA6BC,KAG5C,sBAAKtD,UAAU,OAAf,qBAGI,cAAC,EAAD,CAAgBU,SAAUA,EAAUZ,SAAUkC,OAGlD,sBAAKhC,UAAU,OAAf,qBAGI,cAAC,EAAD,CACIsB,SAAUA,EACVJ,YAAaG,EACbF,oBAAqBuB,EACrB5C,SAAU2C,OAIlB,qBAAKzC,UAAU,OAAf,SACI,sBAAKA,UAAU,oBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,+CAEA,sBAAKA,UAAU,2EAA2EW,MAAO,CAACC,OAAQ,QAA1G,UACI,wBAAQZ,UAAU,GAAGX,MAAO6C,EAAU,GAAIpC,SAAU,SAAA8D,GAAC,OAAIxB,EAAa,CAACwB,EAAErD,OAAOlB,MAAO6C,EAAU,MAAjG,SAEQR,EAAYjB,KAAI,SAAAoD,GAAC,OACb,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,QAIzB,sBAAM7D,UAAU,qBAAhB,eACA,wBAAQA,UAAU,MAAMX,MAAO6C,EAAU,GAAIpC,SAAU,SAAA8D,GAAC,OAAIxB,EAAa,CAACF,EAAU,GAAI0B,EAAErD,OAAOlB,SAAjG,SAEQsC,EAAclB,KAAI,SAAAoD,GAAC,OACf,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,cAOjC,sBAAK7D,UAAU,uBAAf,UACI,6CAEA,sBAAKA,UAAU,2EAA2EW,MAAO,CAACC,OAAQ,QAA1G,UACI,wBAAQZ,UAAU,GAAGX,MAAOgD,EAAQ,GAAIvC,SAAU,SAAA8D,GAAC,OAAItB,EAAW,CAACsB,EAAErD,OAAOlB,MAAOgD,EAAQ,MAA3F,SAEQX,EAAYjB,KAAI,SAAAoD,GAAC,OACb,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,QAIzB,sBAAM7D,UAAU,qBAAhB,eACA,wBAAQA,UAAU,MAAMX,MAAOgD,EAAQ,GAAIvC,SAAU,SAAA8D,GAAC,OAAItB,EAAW,CAACD,EAAQ,GAAIuB,EAAErD,OAAOlB,SAA3F,SAEQsC,EAAclB,KAAI,SAAAoD,GAAC,OACf,wBAAgBxE,MAAOwE,EAAvB,SAA2BA,EAAEzI,WAAWO,SAAS,EAAG,MAAvCkI,mBAUzC,sBAAK7D,UAAU,OAAf,UACI,oDAEA,0BAAU8D,KAAK,OAAO9D,UAAU,uEAC5BX,MAAOkD,EACPzC,SAAU,SAAA8D,GAAC,OAAIpB,EAAeoB,EAAErD,OAAOlB,aAI/C,sBAAKW,UAAU,OAAf,qBAGI,cAAC,EAAD,CAAgBU,SAAUlC,EAAUsB,SAAUmC,OAGlD,qBAAKjC,UAAU,mBAAf,SACI,wBAAQA,UAAU,gFACdyB,QA7HxB,WACI,IAAMsC,EAAkBnI,EAAuBsG,GACzC8B,EAAgBpI,EAAuByG,GAEvCmB,EAAO,CACTzH,KAAMgI,EACNvH,SAAUN,EAAe8H,EAAeD,GACxC1C,QACAC,SAAUA,EAAWA,EAAS/C,IAAMG,EACpC6D,cACAjE,MAAOoC,EAASnC,IAChBC,SAAUA,EAASD,KAIvB0F,QAAQC,IAAI,gBAAiBV,GAC7Bb,EAASwB,OAAOX,IA4GA,SAGMJ,EAAY,iBAAmB,6BCtE9CiB,EAzHK,SAAC,GAA6D,IAA3DhG,EAA0D,EAA1DA,QAASqC,EAAiD,EAAjDA,SAAiD,IAAvC4D,cAAuC,SAAvBC,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,SAC9D,EAAkC3F,oBAAS,GAA3C,mBAAO4F,EAAP,KAAkBC,EAAlB,KACA,EAA0C7F,oBAAS,GAAnD,mBAAO8F,EAAP,KAAsBC,EAAtB,KACA,EAAgC/F,oBAAS,GAAzC,mBAAOgG,EAAP,KAAiBC,EAAjB,KAEIC,EAAa1G,EAAQG,SAASD,MAAQF,EAAQC,MAAMC,IACpDyG,GAAa,EACZD,GAAc1G,EAAQG,SAASD,MAAQmC,EAASnC,MACjDyG,GAAa,GAEjB,IAEIC,EADoD,IAAzCpI,KAAKqI,OAAO7G,EAAQtC,KAAO,KAAO,KACtB,GAAM,EAE7BoJ,GADJF,IAAc5G,EAAQtC,KAAO,KAAO,IAAO,IAClBsC,EAAQ7B,SAAW,GACxC4I,EAAQ,UALG,EAKH,cAAoBH,EAApB,cALe,EAKf,cAA8CE,GAEpDE,EAAYZ,GAAaE,EAE3BrD,EAAWjD,EAAQiD,SAASD,MAC7BhD,EAAQiD,SAAS/C,MAAQG,IACxB4C,EAAWjD,EAAQgD,OAEvB,IAAMiE,EAAsB,SAAZhE,EAEhBpC,qBAAU,WAGN,OAFAzB,OAAO8H,iBAAiB,iBAAkBC,GAAe,GACzD/H,OAAO8H,iBAAiB,iBAAkBE,GAAiB,GACpD,WACHxB,QAAQC,IAAI,8BACZzG,OAAOiI,oBAAoB,iBAAkBF,GAAe,GAC5D/H,OAAOiI,oBAAoB,iBAAkBD,GAAiB,MAEnE,IAEH,IAAME,EAAU/C,uBAAY,kBAAMpD,MAAM,GAAD,OAAIf,EAAJ,oBAAwBJ,EAAQE,KAAO,CAC1EuE,OAAQ,SACRI,QAAS,CACL,eAAgB,sBAGvBzD,MAAK,SAAAlC,GAAG,OAAGA,EAAImC,YAAS,CACrByD,UAAW,WACP2B,GAAY,GACZN,OAIR,SAASgB,EAAc5B,GACnBK,QAAQC,IAAI,0BACZU,GAAiB,GAGrB,SAASa,EAAgB7B,GACrBK,QAAQC,IAAI,0BACZU,GAAiB,GAvDwD,4CA0D7E,sBAAAvH,EAAA,+EAEcD,IAFd,OAGQ0H,GAAY,GACZa,EAAQxB,SAJhB,wGA1D6E,kEAoE7E,sBAAA9G,EAAA,+EAEcD,IAFd,OAGQmH,EAAOlG,GAHf,wGApE6E,sBA6E7E,OACI,sBAAK2B,UAAS,0DAAqDsE,GAAU,UAA/D,2CAA2GgB,GAAW,WAAtH,YAAoIT,GAAY,iBAAmBlE,MAAO,CAAEyE,YACtLQ,YAAa,SAAChC,GAAD,OAAOc,GAAa,IACjCmB,aAAc,SAAAC,GAAC,OAAIpB,GAAa,IAChCjD,QAAS,SAAAqE,GAAC,OAAIT,EAjFuD,0CAiF3CU,GAjF2C,0CAiFnBC,IAHtD,WAKMX,GAAaR,IACX,qBAAK7E,UAAU,kEAAf,SACM6E,EAAW,sBAAwB,oBAI1CP,IAAWgB,GACV,gCACI,sBAAKtF,UAAU,sBAAsBW,MAAO,CAAEsF,SAAU,QAAxD,UACKhL,EAAkBoD,EAAQtC,MAD/B,MACyCQ,EAAiB8B,EAAQtC,KAAMsC,EAAQ7B,aAEhF,qBAAIwD,UAAU,SAAd,UACKgF,GACG,2CAAc3G,EAAQC,MAAM+B,cAE9B2E,GAAc1D,MAElByD,IAAeC,GACb,qBAAKrE,MAAO,CAAEuF,UAAW,UAAWC,QAAS,OAAQC,WAAY,SAAUH,SAAU,QAArF,SACI,qBAAKtF,MAAO,CAAE0F,MAAO,OAAQzF,OAAQ,OAAQ0F,UAAW,QAASC,aAAc,OAC3ElF,MAAO,aAAehD,EAAQG,SAAS6B,UAAWQ,IAAKxC,EAAQG,SAASsC,GAAIC,IAAI,UAOlGuD,GACE,qBAAKtE,UAAU,sEAAf,SACI,sBAAMA,UAAU,aACZwG,wBAAyB,CAACC,OAAQnF,EAASjG,MAAM,IAAII,KAAK,kBCtCnEiL,MA7Ef,YAAkE,IAAhChG,EAA+B,EAA/BA,SAAUzC,EAAqB,EAArBA,SAAU6D,EAAW,EAAXA,QAC5C6E,EAAiB1I,EAAS2I,MAAK,SAACvJ,EAAGwJ,GAAJ,OAAUxJ,EAAEtB,KAAO8K,EAAE9K,QACpD+K,EAAejK,KAAKnB,IAAI,IAA0B,IAArB+B,OAAOsJ,aAE1C,OACI,sBAAK/G,UAAU,6EAAf,UACI,qBAAKA,UAAU,gBAAgByB,QAASK,IAGxC,sBAAK9B,UAAU,2DACXW,MAAO,CAACqG,UAAWF,GADvB,UAGI,sBAAK9G,UAAU,kEAAf,UACI,qBAAKA,UAAU,wDACf,sBAAKA,UAAU,kCAAf,UACI,qBAAKA,UAAU,2EAAf,SACI,qBAAKA,UAAU,sCAAsCa,IAAKH,EAASI,GAAIC,IAAI,OAE/E,oBAAIf,UAAU,OAAd,SAAsBU,EAASL,eAGnC,wBAAQL,UAAU,oEAAoEyB,QAASK,EAA/F,SACI,qBAAK9B,UAAU,MAAMyD,KAAK,eAAeC,QAAQ,YAAjD,SAA6D,sBAAMC,EAAE,2LAI7E,qBAAK3D,UAAU,eAAf,SACK2G,EAAelG,KAAI,SAACpC,GACjB,IAAI0G,EAAa1G,EAAQG,SAASD,MAAQF,EAAQC,MAAMC,IACpDyG,GAAa,EACZD,GAAc1G,EAAQG,SAASD,MAAQmC,EAASnC,MACjDyG,GAAa,GAEjB,IAAI1D,EAAWjD,EAAQiD,SAASD,MAIhC,OAHGhD,EAAQiD,SAAS/C,MAAQG,IACxB4C,EAAWjD,EAAQgD,OAGnB,qBAAuBrB,UAAU,OAAjC,SACI,sBAAKA,UAAU,mBAAf,UACI,uBAAMA,UAAU,6CAAhB,UACK/E,EAAkBoD,EAAQtC,MAD/B,MACyCQ,EAAiB8B,EAAQtC,KAAMsC,EAAQ7B,aAGhF,sBAAKwD,UAAU,SAAf,UACI,qBAAIA,UAAU,gBAAd,UACKgF,GAAc,iCAAM,sBAAMhF,UAAU,cAAhB,oBAAN,IAAmD3B,EAAQC,MAAM+B,cAC9E2E,GAAc1D,KAEpB,mBAAGtB,UAAU,qBACTwG,wBAAyB,CAACC,OAAQvJ,EAAWmB,EAAQkE,iBAKvDwC,IAAeC,GACb,sBAAKhF,UAAU,yBAAf,UACI,qBAAKW,MAAO,CAAE0F,MAAO,OAAQzF,OAAQ,OAAQ0F,UAAW,QAASC,aAAc,OAC3ElF,MAAO,aAAehD,EAAQG,SAAS6B,UAAWQ,IAAKxC,EAAQG,SAASsC,GAAIC,IAAI,KAGpF,uBAAMf,UAAU,OAAhB,uBACe3B,EAAQG,SAAS6B,uBAxB1ChC,EAAQE,iB,QC9B9C,SAASI,EAAcC,GACnB,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KAcA,OAZAC,qBAAU,WACR,GAA0B,KAAtBN,EAAWO,OAAe,CAC5B,IAAIC,GAAU,EAMd,OALAH,GAAW,GAanB,SAAqBI,GACnB,GAAIC,EAAMD,GACR,OAAO/B,QAAQiC,QAAQD,EAAMD,IAE/B,OAAOG,MAAM,GAAD,OAAIf,EAAJ,8BAAkCY,IAC3CI,MAAK,SAAClC,GAAD,OAASA,EAAImC,UAClBD,MAAK,SAACE,GAEL,OADAL,EAAMD,GAASM,EACRA,KApBLqB,CAAYpC,GAAYa,MAAK,SAACX,GAC5BG,GAAW,GACPG,GAASL,EAAUD,MAElB,kBAAOM,GAAU,MAEzB,CAACR,IAEG,CAACE,EAAQE,GAGpB,IAAMM,EAAQ,GA6FC2H,MAhFf,YAAoF,IAAD,IAAzDpH,mBAAyD,MAA3C,kBAA2C,EAAxBiC,EAAwB,EAAxBA,QAASoF,EAAe,EAAfA,aAChE,EAAoCrI,mBAAS,IAA7C,mBAAOD,EAAP,KAAmBmB,EAAnB,KACA,EAA0BpB,EAAcC,GAAxC,mBAAOE,EAAP,KAAeE,EAAf,KACMmI,EAAWC,iBAAO,MASxB,SAASC,EAAUzD,GACF,WAAVA,EAAE0D,MACEH,EAASI,QAAQlI,MAAMlB,OACtB4B,EAAc,IAEd+B,KAcZ,OA1BA5C,qBAAU,WAEN,OADAsI,SAASjC,iBAAiB,QAAS8B,GAAW,GACvC,WACHG,SAAS9B,oBAAoB,QAAS2B,GAAW,MAEtD,IAsBC,sBAAKrH,UAAU,6FAAf,UACI,qBAAKA,UAAU,gBAAgByB,QAASK,IAGxC,qBAAK9B,UAAU,gDAAf,SACI,qBAAKA,UAAU,GAAf,SACI,eAAC,IAAD,CAAU,aAAW,SAASA,UAAU,SACpCC,SAbC,SAACC,GACpB,IAAMC,EAAkBrB,EAAOsB,MAAK,qBAAEC,YAA6BH,KACnEgH,EAAa,2BAAI/G,GAAL,IAAuBsH,eAAe,MAUpC,UAGI,cAAC,IAAD,CACIC,IAAKP,EACLnH,UAAU,+GACVH,YAAaA,EACbR,MAAOT,EACPkB,SAzBO,SAACQ,GACzBA,EAAMC,OAAOlB,QAAU8H,EAASI,QAAQlI,OACzCU,EAAcO,EAAMC,OAAOlB,QAwBTmB,WAAS,IAEZ1B,GACG,cAAC,IAAD,CAAiBkB,UAAU,mFAA3B,SACKlB,EAAOX,OAAS,EACjB,cAAC,IAAD,UACKW,EAAO2B,KAAI,SAACC,GACb,OACI,cAAC,IAAD,CAAmCrB,MAAOqB,EAASL,UAAnD,SACI,sBAAKL,UAAU,uDAAf,UACI,qBAAKA,UAAU,uDAAf,SACI,qBAAKA,UAAU,sCAAsCa,IAAKH,EAASI,GAAIC,IAAI,OAE/E,sBAAMf,UAAU,eAAhB,SAAgCU,EAASL,gBAL5BK,EAASnC,UAYtC,sBAAMyB,UAAU,YAAhB,SACMhB,EAAU,aAAe,kCCpGzDvC,EAAQ,GAEd,SAASkL,EAAT,GAAgE,IAAzCC,EAAwC,EAAxCA,UAAW3J,EAA6B,EAA7BA,SAAU4J,EAAmB,EAAnBA,kBAC1C,EAAwChJ,mBAAS,MAAjD,mBAAOiJ,EAAP,KAAqBC,EAArB,KACA,EAAoClJ,mBAAS,MAA7C,mBAAOmJ,EAAP,KAAmBC,EAAnB,KACA,EAAoDpJ,mBAAS,MAA7D,mBAAOqJ,EAAP,KAA2BC,EAA3B,KACA,EAA8CtJ,oBAAS,GAAvD,mBAAOuJ,EAAP,KAAwBC,EAAxB,KACMC,EAAcV,EAAUxH,MAAK,kBAA+B,QAA/B,EAAEC,aAWrC,SAASgH,EAAUzD,GACjB,GAAa,UAAVA,EAAE0D,IAAgB,CACnB,IAAMiB,EAA2B,IAAIC,YAAY,kBACjD/K,OAAOgL,cAAcF,QAGdP,GAAeE,IACT,MAAVtE,EAAE0D,IACDe,GAAmB,GACL,WAAVzE,EAAE0D,MACLQ,GAAgBA,EAAaL,eAC9BY,GAAmB,GACnBK,YAAW,kBAAMX,EAAgB,QAAO,KAGxCA,EAAgB,QAKxB,SAASY,EAAY/E,GACnB,GAAa,UAAVA,EAAE0D,IAAgB,CACnB,IAAMiB,EAA2B,IAAIC,YAAY,kBACjD/K,OAAOgL,cAAcF,IAvCoC,4CA2C7D,WAAmClK,GAAnC,SAAAhB,EAAA,+EAEUD,IAFV,OAGI6K,EAAc5J,GAHlB,wGA3C6D,sBAoD7D,SAASuK,IACPX,EAAc,MACdE,EAAsB,MACtBN,IAGF,OAnDA3I,qBAAU,WAGR,OAFAsI,SAASjC,iBAAiB,QAAS8B,GAAW,GAC9CG,SAASjC,iBAAiB,UAAWoD,GAAa,GAC3C,WACHnB,SAAS9B,oBAAoB,UAAWiD,GAAa,GACrDnB,SAAS9B,oBAAoB,QAAS2B,GAAW,MAEpD,IA6CD,qCACE,sBAAKrH,UAAU,kDAAkDW,MAAO,CAACkI,OAAQ,GAAjF,UACE,qBAAK7I,UAAU,gCAAf,SACE,sBAAMA,UAAU,YAAhB,mBAGF,qBAAKA,UAAU,qBAAqBW,MAAO,CAACmI,IAAK,MAAOC,oBAAoB,UAAD,OAAYtM,GAAZ,WAA3E,SAEIuB,EAAoBC,EAAUqK,EAAY/J,KAAKkC,KAAI,SAACpC,EAAS2K,GAC3D,OACE,cAAC,EAAD,CAEE1E,QAAM,EACN5D,SAAU4H,EAAY/J,IACtBF,QAASA,EACTkG,OAAQ4D,EACR3D,SAAUoE,GALLI,WAafpB,EAAUxJ,QAAO,kBAA+B,QAA/B,EAAEiC,aAAoCI,KAAI,SAACmD,EAAGqF,GAAJ,OACzD,sBAAiBtI,MAAO,CAACwF,QAAS,OAAQ+C,OAAQ,qBAAlD,UACE,sBAAKlJ,UAAU,kDAAkDyB,QAAS,kBAAMsG,EAAgBnE,IAAhG,UACE,qBAAKjD,MAAO,CAAC0F,MAAO,OAAQzF,OAAQ,OAAQ0F,UAAW,QAASC,aAAc,MAAO4C,UAAW,+BAC9F9H,MAAO,aAAeuC,EAAEvD,UAAWQ,IAAK+C,EAAE9C,GAAIC,IAAI,KAEpD,+BAAO6C,EAAEvD,eAEX,sBAAKM,MAAO,CAACyI,KAAM,EAAGC,SAAU,YAAhC,UACE,qBAAKrJ,UAAU,cAAcW,MAAO,CAACmI,IAAK,MAAOC,oBAAoB,UAAD,OAAYtM,GAAZ,WAApE,SAEI6M,MAAM7M,IAASgH,KAAK,IAAIhD,KAAI,SAACqF,EAAGmD,GAAJ,OAC1B,qBAAatI,MAAO,CAACwF,QAAS,OAAQoD,WAAY,OAAQF,SAAU,YAClErJ,UAAU,iBAEVyB,QAAS,kBAlGgC,2CAkG1B+H,CAAoB,CAAC9I,SAAUkD,EAAG1B,UAAWnF,EAAekM,EAAE,OAHrEA,QAWhB,qBAAKjJ,UAAU,4CAA4CW,MAAO,CAAC4I,WAAY,sBAAuBT,IAAK,MAAOC,oBAAoB,UAAD,OAAYtM,GAAZ,WAArI,SAEIuB,EAAoBC,EAAU2F,EAAErF,KAAKkC,KAAI,SAACpC,EAAS2K,GACjD,OACE,cAAC,EAAD,CAEEtI,SAAUkD,EACVvF,QAASA,EACTkG,OAAQ4D,EACR3D,SAAUoE,GAJLI,aA3BTpF,EAAErF,QAyCZuJ,GACE,cAAC,EAAD,CACEpH,SAAUoH,EACV7J,SAAUD,EAAoBC,EAAU6J,EAAavJ,KACrDuD,QAAS,SAAAgE,GAAC,OAAIiC,EAAgB,SAKlCC,GACE,cAAC,EAAD,CACE3J,QAAS2J,EACTlG,QAAS,SAAAgE,GAAC,OAAImC,EAAc,OAC5BlG,OAAQ6G,IAKZV,GACE,cAAC,EAAD,CACE7J,QAAS6J,EACTpG,QAAS,SAAAgE,GAAC,OAAIqC,EAAsB,OACpCpG,OAAQ6G,IAKZR,GACE,cAAC,EAAD,CACElB,aAAc,SAAAuC,GAASpB,GAAmB,GAAQN,EAAgB0B,IAClE3H,QAAS,SAAAgE,GAAC,OAAIuC,GAAmB,SAkDhCqB,MA1Cf,WACE,MAAiCC,mBAAS,gBAAgB,kBACxDnK,MAAM,GAAD,OAAIf,EAAJ,cAAyBgB,MAAK,SAAAlC,GAAG,OACpCA,EAAImC,aAFD0D,EAAP,EAAOA,UAAkBI,GAAzB,EAAkBF,MAAlB,EAAyBE,MAMnBvF,EAAW0L,mBAAS,YAAY,kBACpCnK,MAAM,GAAD,OAAIf,EAAJ,aAAwBgB,MAAK,SAAAlC,GAAG,OACnCA,EAAImC,aAIR,OAAI0D,GAAanF,EAASmF,UACjB,qBAAKpD,UAAU,4HAAf,wBAGP,gCACE,sBAAKA,UAAU,eAAeW,MAAO,CAACwF,QAAS,OAAQoD,WAAY,OAAQK,MAAO,QAASf,OAAQ,GAAnG,UACE,qBAAKlI,MAAO,CAAC4I,WAAW,OAAQM,YAAa,iBAAkBC,QAAS,UAAWzD,MAAO,OAAQ0D,WAAY,KAG9G,qBAAKpJ,MAAO,CAACyI,KAAM,EAAGjD,QAAS,OAAQ2C,IAAK,MAAOC,oBAAoB,UAAD,OAAYtM,EAAZ,WAAtE,SAEI6M,MAAM7M,GAAOgH,KAAK,IAAIhD,KAAI,SAACqF,EAAGmD,GAAJ,OACxB,sBAAatI,MAAO,CAACwF,QAAS,OAAQoD,WAAY,OAAQO,QAAS,WAAnE,UACI,EAAIb,EADR,QAAUA,WAQlB,cAACtB,EAAD,CACEC,UAAWpE,EAAKoD,MAAK,SAACvJ,EAAGwJ,GAAJ,OAAUxJ,EAAE2M,WAAanD,EAAEmD,cAChD/L,SAAUA,EAASuF,KACnBqE,kBAAmB,kBAAM5J,EAASgM,iB,QC3K3BC,EAZO,SAACC,GACrB,MAA0BtL,mBAAS,0BAAnC,mBAAO+K,EAAP,KAAcQ,EAAd,KAQA,OANAlL,qBAAU,YA7Bc,SAACiL,GACzB,OAAO,IAAI7M,SAAQ,SAACiC,EAAS8K,GACtBF,GACHE,IAEF,IAAMC,EAAQ,IAAIC,MAClBD,EAAMzJ,IAAMsJ,EACZG,EAAME,YAAc,YAEpBF,EAAMG,OAAS,WACb,IACE,IACI9K,GADe,IAAI+K,KACCC,SAASC,KAAM,IAErCjL,EADCA,EACK,eAAWA,EAAOlE,KAAK,KAAvB,OAEC,sBACTwI,QAAQC,IAAI,eAAgBvE,GAC5BJ,EAAQI,GACR,MAAO2D,GACP/D,EAAQ,8BAUZsL,CAAWV,GACR1K,KAAK2K,GACLU,OAAM,kBAAMV,EAAS,6BACvB,CAACD,IAEGP,GCUMmB,EA7CK,SAAC,GAAyB,IAAxB1M,EAAuB,EAAvBA,QAASqC,EAAc,EAAdA,SACvBqE,EAAa1G,EAAQG,SAASD,MAAQF,EAAQC,MAAMC,IACpDyG,GAAa,EACZD,GAAc1G,EAAQG,SAASD,MAAQmC,EAASnC,MACjDyG,GAAa,GAEjB,IAAI1D,EAAWjD,EAAQiD,SAASD,MAIhC,OAHGhD,EAAQiD,SAAS/C,MAAQG,IACxB4C,EAAWjD,EAAQgD,OAGnB,qBAAuBrB,UAAU,OAAjC,SACI,sBAAKA,UAAU,kDAAf,UACI,uBAAMA,UAAU,8BAAhB,UACK/E,EAAkBoD,EAAQtC,MAD/B,MACyCQ,EAAiB8B,EAAQtC,KAAMsC,EAAQ7B,aAGhF,sBAAKwD,UAAU,SAAf,UACI,qBAAIA,UAAU,gBAAd,UACKgF,GAAc,iCAAM,sBAAMhF,UAAU,cAAhB,oBAAN,IAAmD3B,EAAQC,MAAM+B,cAC9E2E,GAAc1D,KAEpB,mBAAGtB,UAAU,qBACTwG,wBAAyB,CAACC,OAAQvJ,EAAWmB,EAAQkE,iBAKvDwC,IAAeC,GACb,sBAAKhF,UAAU,yBAAf,UACI,qBAAKW,MAAO,CAAE0F,MAAO,OAAQzF,OAAQ,OAAQ0F,UAAW,QAASC,aAAc,OAC3ElF,MAAO,aAAehD,EAAQG,SAAS6B,UAAWQ,IAAKxC,EAAQG,SAASsC,GAAIC,IAAI,KAGpF,uBAAMf,UAAU,OAAhB,uBACe3B,EAAQG,SAAS6B,uBAxB1ChC,EAAQE,MCiEXyM,EA1EM,SAAC,GAA0B,IAAzBtK,EAAwB,EAAxBA,SACbuK,EAAmBjN,EADkB,EAAdC,SAC0ByC,EAASnC,KAChE,EAAgCM,oBAAS,GAAzC,mBAAOqM,EAAP,KAAiBC,EAAjB,KACMvB,EAAQM,EAAcxJ,EAASI,IAErC,OAAGoK,EAEK,sBAAKlL,UAAU,yDAAf,UACI,sBAAKA,UAAU,0CAAf,UACI,qBAAKA,UAAU,8DAA8Da,IAAKH,EAASI,GAAIC,IAAI,KAEnG,sBAAKf,UAAU,YAAf,UACI,qBAAKA,UAAU,kDAAkDa,IAAKH,EAASI,GAAIC,IAAI,KAEvF,qBAAIf,UAAU,oCAAd,UACMU,EAASL,UAAUhF,MAAM,KAAK,GADpC,oBAKJ,wBAAQ2E,UAAU,yGACdyB,QAAS,kBAAM0J,GAAY,IAD/B,SAGI,qBAAKnL,UAAU,MAAM0D,QAAQ,YAA7B,SAAyC,sBAAMC,EAAE,yHAIzD,qBAAK3D,UAAU,yBAAf,SAEQiL,EAAiBxK,KAAI,SAACpC,EAAS4K,GAAV,OACjB,qBAAajJ,UAAU,OAAvB,SACI,cAAC,EAAD,CACIU,SAAUA,EACVrC,QAASA,KAHP4K,WAc9B,sBAAKjJ,UAAU,wIAEXyB,QAAS,kBAAM0J,GAAY,IAF/B,UAII,qBAAKnL,UAAU,8DAA8Da,IAAKH,EAASI,GAAIC,IAAI,KAEnG,qBAAKf,UAAU,0EAIf,sBAAKA,UAAU,+EAAf,UACI,sBAAMA,UAAU,oCAAoCW,MAAO,CAAC4I,WAAYK,GAAgB,MACxF,sBAAM5J,UAAU,oCAAoCW,MAAO,CAAC4I,WAAYK,EAAQA,EAAM3N,QAAQ,KAAM,QAAU,MAC9G,sBAAM+D,UAAU,mCAAmCW,MAAO,CAAC4I,WAAYK,EAAQA,EAAM3N,QAAQ,KAAM,QAAU,MAC7G,sBAAM+D,UAAU,oCAAoCW,MAAO,CAAC4I,WAAYK,GAAgB,SAG5F,sBAAK5J,UAAU,gBAAf,UACI,qBAAKA,UAAU,kDAAkDa,IAAKH,EAASI,GAAIC,IAAI,KAEvF,oBAAIf,UAAU,wBAAd,SACKU,EAASL,YAEd,oBAAGL,UAAU,aAAb,UACMiL,EAAiB9M,OADvB,sBCgBDiN,EAlFG,WACd,MAAkCvM,oBAAS,GAA3C,mBAAOwM,EAAP,KAAkBC,EAAlB,KACA,EAAsCzM,mBAAS,IAA/C,mBAAOqC,EAAP,KAAoBqK,EAApB,KAEM3D,EAAY+B,mBAAS,gBAAgB,kBACvCnK,MAAM,GAAD,OAAIf,EAAJ,cAAyBgB,MAAK,SAAAlC,GAAG,OAClCA,EAAImC,aAINzB,EAAW0L,mBAAS,YAAY,kBAClCnK,MAAM,GAAD,OAAIf,EAAJ,aAAwBgB,MAAK,SAAAlC,GAAG,OACjCA,EAAImC,aAIZ,GAAIkI,EAAUxE,WAAanF,EAASmF,UAAW,OAAO,qBAAKpD,UAAU,4HAAf,wBAEtD,IAAIwL,EAAe5D,EAAUpE,KAAKpF,QAAO,kBAA+B,QAA/B,EAAEiC,aAO3C,OANGa,EAAY/C,SACXqN,EAAeA,EAAapN,QAAO,mBAAiF,IAAjF,EAAEiC,UAAyBoL,cAAcC,QAAQxK,EAAYuK,kBAC3FhL,KAAI,SAACmD,GAAD,mBAAC,eAAWA,GAAZ,IAAe+H,YAAa/H,EAAEvD,UAAUoL,cAAcC,QAAQxK,EAAYuK,oBAC9E7E,MAAK,SAACvJ,EAAGwJ,GAAJ,OAAUxJ,EAAEsO,YAAc9E,EAAE8E,gBAItC,sBAAK3L,UAAU,iGAAf,UACI,sBAAKA,UAAU,8EAAf,WACOqL,GAAa,qCACR,oBAAIrL,UAAU,yBAAd,0BAIA,wBAAQA,UAAU,uFACdyB,QAAS,kBAAM6J,GAAa,IADhC,SAGI,qBAAKtL,UAAU,MAAM0D,QAAQ,YAA7B,SAAyC,sBAAMC,EAAE,sPAK3D0H,GAAa,qCACP,sBAAKrL,UAAU,oCAAf,UACI,qBAAKA,UAAU,iBAAiB0D,QAAQ,YAAxC,SAAoD,sBAAMC,EAAE,iPAE5D,uBAAOnD,WAAS,EAACR,UAAU,+EAA+E8D,KAAK,OAAOjE,YAAY,iBAC9HR,MAAO6B,EACPpB,SAAU,SAAA8D,GAAC,OAAI2H,EAAe3H,EAAErD,OAAOlB,UAG3C,wBACIW,UAAS,wGAAmGkB,EAAY/C,QAAU,iCAClIsD,QAAS,kBAAM8J,EAAe,KAFlC,SAII,qBAAKvL,UAAU,MAAM0D,QAAQ,YAA7B,SAAyC,sBAAMC,EAAE,yHAIzD,wBAAQ3D,UAAU,2BACdyB,QAAS,WAAO8J,EAAe,IAAKD,GAAa,IADrD,0BAQZ,qBAAKtL,UAAU,YAAf,SAEQwL,EAAa/K,KAAI,SAACmD,EAAGqF,GAAJ,OACb,qBAAajJ,UAAU,OAAvB,SACI,cAAC,EAAD,CACIU,SAAUkD,EACV3F,SAAUA,EAASuF,QAHjByF,YCxDnB2C,GAhBO,SAACC,GACrB,MAA8BhN,oBAAS,GAAvC,mBAAOiN,EAAP,KAAgBC,EAAhB,KAYA,OAVA7M,qBAAU,WACR,IAAM8M,EAAQvO,OAAOwO,WAAWJ,GAC5BG,EAAMF,UAAYA,GACpBC,EAAWC,EAAMF,SAEnB,IAAMI,EAAW,kBAAMH,EAAWC,EAAMF,UAExC,OADArO,OAAO8H,iBAAiB,SAAU2G,GAC3B,kBAAMzO,OAAOiI,oBAAoB,SAAUwG,MACjD,CAACJ,EAASD,IAENC,GCRHK,GAAc,IAAIC,cAExB,SAASC,KAGP,OAFiBT,GAAc,sBAI3B,cAAC,EAAD,IAIF,cAACU,EAAD,IAIJC,IAASC,OAEL,cAAC,sBAAD,CAAqBC,OAAQN,GAA7B,SACE,cAACE,GAAD,MAGF7E,SAASkF,eAAe,W","file":"static/js/main.c97bdf42.chunk.js","sourcesContent":["export const getTimeFromNumber = (number) => {\n    var numArray = number.toString().split('');\n    var hour = [...numArray].reverse().slice(2).reverse().join('');\n    var min = numArray.slice(-2).join('');\n    return `${hour.padStart(2, '0')}:${min.padStart(2, '0')}`;\n}\n\nexport const getNumberFromTimeArray = ([hrs,mins]) => {\n    hrs = hrs.toString().padStart(2, '0');\n    mins = mins.toString().padStart(2, '0');\n    var time = getTimeFromNumber(Number(`${hrs}${mins}`));\n    return Number(time.replace(':', ''));\n}\n\nexport const numberTimeDiff = (larger, smaller) => {\n    let [lh, lm] = getTimeFromNumber(larger).split(\":\");\n    let [sh, sm] = getTimeFromNumber(smaller).split(\":\");\n\n    var hourDiff = lh-sh;\n    var minDiff = lm-sm;\n\n    return (hourDiff*60) + minDiff;\n}\n\nexport const addMinutesToTime = (number, duration) => {\n    var [hours, minutes] = getTimeFromNumber(number).split(\":\");\n    var totalMinutes = Number(minutes)+Number(duration);\n    var addedHours = Math.floor(totalMinutes / 60);\n    hours = (Number(hours) + addedHours).toString();\n    minutes = (totalMinutes % 60).toString();\n    \n    return `${hours.padStart(2, '0')}:${minutes.padStart(2, '0')}`;\n}\n\nexport const getTimeFromRow = (row) => {\n    var number = row - 1;\n    var rowValue = (Math.floor(number / 4) + 8) * 100;\n    rowValue += Math.floor(number % 4) * 15;\n    var [hours, mins] = getTimeFromNumber(rowValue).split(\":\");\n    return `${hours.padStart(2, '0')}:${mins}`;\n}\n\nexport function formatLink(content){\n    const exp_match = /(\\b(https?|):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n    const element_content=content.replace(exp_match, `<a class=\"text-blue-900\" target=\"_blank\" href='$1'>$1</a>`);\n    const new_exp_match =/(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n    return element_content.replace(new_exp_match, '$1<a target=\"_blank\" href=\"http://$2\">$2</a>');\n}\n\nexport async function confirmPassword(){\n    return new Promise((res, rej) => {\n        const passwordSet = window.localStorage.getItem(\"PASSWORD_SET\");\n        if(passwordSet)\n            res(true);\n        else{\n            window.showConfirmDialog(\"HIF-2021\", {\n                onOkay: () => {\n                    window.localStorage.setItem(\"PASSWORD_SET\", true);\n                    res();\n                },\n                onCancel: () => {\n                    rej();\n                },\n            });\n        }\n    });\n}\n\nexport function getEmployeeSessions(sessions, employeeId){\n    if(!sessions || !sessions.length)\n      return [];\n\n    return sessions.filter(session => {\n      return session.owner._id === employeeId || session.reviewer._id === employeeId;\n    });\n}","export const BASE_URL = \"https://walterkimaro.com/api\";\nexport const defaultActivity = \"a535186e-5e34-4bc1-872f-d06d7b604613\";","import {\n    Combobox,\n    ComboboxInput,\n    ComboboxPopover,\n    ComboboxList,\n    ComboboxOption\n} from \"@reach/combobox\";\nimport { useEffect, useState } from \"react\";\nimport { BASE_URL } from \"../constants\";\n\nfunction useCitySearch(searchTerm) {\n  const [cities, setCities] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (searchTerm.trim() !== \"\") {\n      let isFresh = true;\n      setLoading(true);\n      fetchCities(searchTerm).then((cities) => {\n        setLoading(false);\n        if (isFresh) setCities(cities);\n      });\n      return () => (isFresh = false);\n    }\n  }, [searchTerm]);\n\n  return [cities, loading];\n}\n\nconst cache = {};\nfunction fetchCities(value) {\n  if (cache[value])\n    return Promise.resolve(cache[value]);\n    \n  return fetch(`${BASE_URL}/Employee/search?q=${value}`)\n    .then((res) => res.json())\n    .then((result) => {\n      cache[value] = result;\n      return result;\n    });\n}\n\nfunction SearchEmployees({placeholder = \"Type to search\", onChange}) {\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [cities, loading] = useCitySearch(searchTerm);\n    const handleSearchTermChange = (event) => {\n      setSearchTerm(event.target.value);\n    };\n    const handleSelect = (name) => {\n      const selectedEmployee= cities.find(({full_name}) => full_name === name);\n      onChange(selectedEmployee);\n    };\n\n    return (\n      <Combobox aria-label=\"Cities\" className=\"w-full\"\n        onSelect={handleSelect}\n      >\n        <ComboboxInput\n          className=\"w-full py-1 px-2 rounded border border-gray-300 focus:outline-none bg-gray-100\"\n          placeholder={placeholder}\n          onChange={handleSearchTermChange}\n          autoFocus\n        />\n        {cities && (\n          <ComboboxPopover className=\"rounded overflow-hidden bg-white shadow-lg border z-20\">\n            {(!loading && cities.length) > 0 ? (\n              <ComboboxList>\n                {cities.map((employee) => {\n                  return (\n                      <ComboboxOption key={employee._id} value={employee.full_name}>\n                          <div className=\"flex items-center px-2 border-t border-gray-300\" style={{height: \"34px\"}}>\n                              <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                                  <img className=\"absolute w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n                              </div>\n                              <span className=\"ml-2 text-sm\">{employee.full_name}</span>\n                          </div>\n                      </ComboboxOption>\n                  );\n                })}\n              </ComboboxList>\n            ) : (\n              <span className=\"block p-3\">\n                { loading ? 'Loading...' : 'No results found' }\n              </span>\n            )}\n          </ComboboxPopover>\n        )}\n      </Combobox>\n    );\n  }\n\nexport default SearchEmployees;","import {\n    Combobox,\n    ComboboxInput,\n    ComboboxPopover,\n    ComboboxList,\n    ComboboxOption\n} from \"@reach/combobox\";\nimport { useEffect, useState } from \"react\";\nimport { BASE_URL } from \"../constants\";\n\nfunction useCitySearch(searchTerm) {\n  const [cities, setCities] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (searchTerm.trim() !== \"\") {\n      let isFresh = true;\n      setLoading(true);\n      fetchCities(searchTerm).then((cities) => {\n        setLoading(false);\n        if (isFresh) setCities(cities);\n      });\n      return () => (isFresh = false);\n    }\n  }, [searchTerm]);\n\n  return [cities, loading];\n}\n\nconst cache = {};\nfunction fetchCities(value) {\n  if (cache[value]) {\n    return Promise.resolve(cache[value]);\n  }\n  return fetch(`${BASE_URL}/SessionType/search?q=${value}`)\n    .then((res) => res.json())\n    .then((result) => {\n      cache[value] = result;\n      return result;\n    });\n}\n\nfunction SelectActivity({placeholder = \"Type to search\", searchQuery = \"\", onSearchQueryChange, onChange}) {\n    const [searchTerm, setSearchTerm] = useState(searchQuery);\n    const [cities, loading] = useCitySearch(searchTerm);\n    const handleSearchTermChange = (event) => {\n      onSearchQueryChange(event.target.value);\n      setSearchTerm(event.target.value);\n    };\n    const handleSelect = (name) => {\n      const selectedActivity= cities.find(({title}) => title === name);\n      onChange(selectedActivity);\n    };\n\n    return (\n      <Combobox aria-label=\"Cities\" className=\"w-full\"\n        onSelect={handleSelect}\n      >\n        <ComboboxInput\n          className=\"w-full py-1 px-2 rounded border border-gray-300 focus:outline-none bg-gray-100\"\n          placeholder={placeholder}\n          value={searchTerm}\n          onChange={handleSearchTermChange}\n          autoFocus\n        />\n        {cities && (\n          <ComboboxPopover className=\"rounded overflow-hidden bg-white shadow-lg border z-20\">\n            {cities.length > 0 \n              ? (\n                <ComboboxList>\n                  {cities.map((activity) => {\n                    return (\n                        <ComboboxOption \n                          key={activity._id} \n                          className=\"px-3 py-2\"\n                          value={activity.title} \n                        />\n                    );\n                  })}\n                </ComboboxList>\n              )\n              : !loading ? null : (\n                <span className=\"block p-3\">\n                  Loading...\n                </span>\n              )\n            }\n          </ComboboxPopover>\n        )}\n      </Combobox>\n    );\n  }\n\nexport default SelectActivity;","import { useEffect, useState } from \"react\";\nimport SelectActivity from \"./SelectActivity\";\n\nfunction ActivityPicker({activity, searchQuery, onSearchQueryChange = () => {}, onChange}){\n    const [value, setValue] = useState(activity);\n    useEffect(() => {\n        if(value && value !== activity)\n            onChange(value);\n    }, [value]);\n\n    return (\n        <>\n            { value && (        \n                <div className=\"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300\" style={{height: \"34px\"}}>\n                    <span className=\"ml-2 text-sm\">{value.title}</span>\n\n                    <button className=\"ml-auto text-blue-900 text-xs p-0\" onClick={() => {setValue(null); onChange(null)}}>\n                        Change\n                    </button>\n                </div>\n            )}\n\n            { !value && \n                <SelectActivity\n                    searchQuery={searchQuery}\n                    onSearchQueryChange={onSearchQueryChange} \n                    onChange={setValue} \n                /> \n            }\n        </>\n    );\n}\n\nexport default ActivityPicker;","import { useEffect, useState } from \"react\";\nimport { addMinutesToTime, getNumberFromTimeArray, getTimeFromNumber, numberTimeDiff } from \"../utils\";\nimport { defaultActivity, BASE_URL } from \"../constants\";\nimport SearchEmployees from \"./SearchEmployees\";\nimport ActivityPicker from \"./ActivityPicker\";\nimport { useMutation } from \"react-query\";\n\nconst hourChoices = [8,9,10,11,12,13,14,15,16, 17,18];\nconst minuteChoices = [0, 15, 30, 45];\n\nfunction EmployeePicker({employee, onChange}){\n    const [value, setValue] = useState(employee);\n    useEffect(() => {\n        if(value && value !== employee)\n            onChange(value);\n    }, [value]);\n\n    return (\n        <>\n            { value && (        \n                <div className=\"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300\" style={{height: \"34px\"}}>\n                    <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                        <img className=\"absolute w-full h-full object-cover\" src={value.dp} alt=\"\" />\n                    </div>\n                    <span className=\"ml-2 text-sm\">{value.full_name}</span>\n\n                    <button className=\"ml-auto text-blue-900 text-xs p-0\" onClick={() => setValue(null)}>\n                        Change\n                    </button>\n                </div>\n            )}\n\n            { !value && <SearchEmployees onChange={setValue} /> }\n        </>\n    );\n}\n\nfunction AddSession({ session, onClose, onSave }) {\n    const duration = session.duration || 60;\n    const [employee, setEmployee] = useState(session.employee);\n    const [reviewer, setReviewer] = useState(session.employee);\n    const [startTime, setStartTime] = useState(session.startTime.split(\":\").map(digit => Number(digit)));\n    const [endTime, setEndTime] = useState([8,30]);\n    const [description, setDescription] = useState(\"\");\n    const [activity, setActivity] = useState(null);\n    const [title, setTitle] = useState(\"\");\n\n    const mutation = useMutation((updatedUser) =>\n        fetch(`${BASE_URL }/Session`, {\n            method: \"POST\",\n            body: JSON.stringify(updatedUser),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        }\n        ).then(res =>res.json()),\n        {\n            onSuccess: () => {\n                onSave();\n            },\n        }\n    );\n\n    const { isLoading, isError, error, isSuccess, data } = mutation;\n\n    useEffect(() => {\n        setEndTime(addMinutesToTime(Number(session.startTime.replace(\":\", \"\")), duration).split(\":\").map(digit => Number(digit)));\n    }, []);\n\n    function handleSave(){\n        const startTimeNumber = getNumberFromTimeArray(startTime);\n        const endTimeNumber = getNumberFromTimeArray(endTime);\n\n        const data = {\n            time: startTimeNumber,\n            duration: numberTimeDiff(endTimeNumber, startTimeNumber),\n            title,\n            activity: activity ? activity._id : defaultActivity,\n            description,\n            owner: employee._id,\n            reviewer: reviewer._id,\n        };\n\n        // onSave(data);\n        console.log(\"Save session:\", data);\n        mutation.mutate(data);\n    }\n\n    return (\n        <div className=\"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"rounded-md overflow-hidden w-full max-w-sm relative z-10\">\n                <div className=\"relative text-white py-3 px-4 flex items-center justify-between\">\n                    <div className=\"absolute inset-0 bg-blue-900s bg-primary opacity-70\"></div>\n                    \n                    <h3 className=\"font-semibold relative z-10\">\n                        Add Session\n                    </h3>\n\n                    <button className=\"relative z-10 p-1 hover:bg-white hover:bg-opacity-25 rounded-full\" onClick={onClose}>\n                        <svg className=\"w-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" /></svg>\n                    </button>\n                </div>\n\n                <div className=\"bg-white py-3 px-4\">\n                    {\n                        isError && <span>Error saving session: {error}</span>\n                    }\n\n                    <div className=\"mb-3\">\n                        Employee\n\n                        <EmployeePicker employee={employee} onChange={setEmployee} />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Activity\n\n                        <ActivityPicker \n                            activity={activity}\n                            onSearchQueryChange={setTitle}\n                            onChange={setActivity} \n                        />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-1 flex-shrink-0 mr-2\">\n                                <label>Start Time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={startTime[0]} onChange={e => setStartTime([e.target.value, startTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={startTime[1]} onChange={e => setStartTime([startTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 flex-shrink-0\">\n                                <label>End time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={endTime[0]} onChange={e => setEndTime([e.target.value, endTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={endTime[1]} onChange={e => setEndTime([endTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div className=\"mb-2\">\n                        <label>Session Details</label>\n\n                        <textarea type=\"text\" className=\"w-full py-1 px-2 rounded bg-gray-100 border border-gray-300 resize-y\" \n                            value={description}\n                            onChange={e => setDescription(e.target.value)}\n                        ></textarea>\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Reviewer\n\n                        <EmployeePicker employee={reviewer} onChange={setReviewer} />\n                    </div>\n\n                    <div className=\"flex justify-end\">\n                        <button className=\"mt-3 mb-1 text-sm py-1 px-6 rounded-full border border-blue-900 text-blue-900\"\n                            onClick={handleSave}\n                        >\n                            { isLoading ? 'Please Wait...' : 'Save Session' }\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default AddSession;","import { useEffect, useState } from \"react\";\nimport { addMinutesToTime, getNumberFromTimeArray, getTimeFromNumber, numberTimeDiff } from \"../utils\";\nimport SearchEmployees from \"./SearchEmployees\";\nimport { useMutation } from \"react-query\";\nimport ActivityPicker from \"./ActivityPicker\";\nimport { defaultActivity, BASE_URL } from \"../constants\";\n\nconst hourChoices = [8,9,10,11,12,13,14,15,16, 17,18];\nconst minuteChoices = [0, 15, 30, 45];\n\nfunction EmployeePicker({employee, onChange}){\n    const [value, setValue] = useState(employee);\n    useEffect(() => {\n        if(value && value !== employee)\n            onChange(value);\n    }, [value]);\n\n    return (\n        <>\n            { value && (        \n                <div className=\"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300\" style={{height: \"34px\"}}>\n                    <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                        <img className=\"absolute w-full h-full object-cover\" src={value.dp} alt=\"\" />\n                    </div>\n                    <span className=\"ml-2 text-sm\">{value.full_name}</span>\n\n                    <button className=\"ml-auto text-blue-900 text-xs p-0\" onClick={() => setValue(null)}>\n                        Change\n                    </button>\n                </div>\n            )}\n\n            { !value && <SearchEmployees onChange={setValue} /> }\n        </>\n    );\n}\n\nfunction EditSession({ session, onClose, onSave }) {\n    const duration = session.duration;\n    const [employee, setEmployee] = useState(session.owner);\n    const [reviewer, setReviewer] = useState(session.reviewer);\n    const [startTime, setStartTime] = useState(getTimeFromNumber(session.time).split(\":\").map(digit => Number(digit)));\n    const [endTime, setEndTime] = useState([8,30]);\n    const [description, setDescription] = useState(session.description);\n    const [activity, setActivity] = useState(session.activity && session.activity._id !== \"a535186e-5e34-4bc1-872f-d06d7b604613\" ? session.activity : null);\n    const [title, setTitle] = useState(session.title);\n\n    const mutation = useMutation((updatedUser) =>\n        fetch(`${BASE_URL}/Session/${session._id}`, {\n            method: \"PATCH\",\n            body: JSON.stringify(updatedUser),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        })\n        .then(res =>res.json()),{\n            onSuccess: () => {\n                onSave();\n            },\n        }\n    );\n\n    const { isLoading, isError, error, isSuccess, data } = mutation;\n\n    useEffect(() => {\n        const startTime = getTimeFromNumber(session.time).replace(\":\", \"\");\n        setEndTime(addMinutesToTime(Number(startTime), duration).split(\":\").map(digit => Number(digit)));\n    }, []);\n\n    function handleSave(){\n        const startTimeNumber = getNumberFromTimeArray(startTime);\n        const endTimeNumber = getNumberFromTimeArray(endTime);\n\n        const data = {\n            time: startTimeNumber,\n            duration: numberTimeDiff(endTimeNumber, startTimeNumber),\n            title,\n            activity: activity ? activity._id : defaultActivity,\n            description,\n            owner: employee._id,\n            reviewer: reviewer._id,\n        };\n\n        // onSave(data);\n        console.log(\"Save session:\", data);\n        mutation.mutate(data);\n    }\n\n    return (\n        <div className=\"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"rounded-md overflow-hidden w-full max-w-sm relative z-10\">\n                <div className=\"relative text-white py-3 px-4 flex items-center justify-between\">\n                    <div className=\"absolute inset-0 bg-blue-900s bg-primary opacity-70\"></div>\n                    \n                    <h3 className=\"font-semibold relative z-10\">\n                        Edit Session\n                    </h3>\n\n                    <button className=\"relative z-10 p-1 hover:bg-white hover:bg-opacity-25 rounded-full\" onClick={onClose}>\n                        <svg className=\"w-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" /></svg>\n                    </button>\n                </div>\n\n                <div className=\"bg-white py-3 px-4\">\n                    {\n                        isError && <span>Error saving session: {error}</span>\n                    }\n\n                    <div className=\"mb-3\">\n                        Employee\n\n                        <EmployeePicker employee={employee} onChange={setEmployee} />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Activity\n\n                        <ActivityPicker \n                            activity={activity}\n                            searchQuery={title}\n                            onSearchQueryChange={setTitle}\n                            onChange={setActivity} \n                        />\n                    </div>\n\n                    <div className=\"mb-4\">\n                        <div className=\"flex items-center\">\n                            <div className=\"flex-1 flex-shrink-0 mr-2\">\n                                <label>Start Time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={startTime[0]} onChange={e => setStartTime([e.target.value, startTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={startTime[1]} onChange={e => setStartTime([startTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 flex-shrink-0\">\n                                <label>End time</label>\n\n                                <div className=\"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300\" style={{height: \"34px\"}}>\n                                    <select className=\"\" value={endTime[0]} onChange={e => setEndTime([e.target.value, endTime[1]])}>\n                                        {\n                                            hourChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                    <span className=\"mx-3 text-gray-400\">|</span>\n                                    <select className=\"px-\" value={endTime[1]} onChange={e => setEndTime([endTime[0], e.target.value])}>\n                                        {\n                                            minuteChoices.map(h => (\n                                                <option key={h} value={h}>{h.toString().padStart(2, '0')}</option>\n                                            ))\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div className=\"mb-2\">\n                        <label>Session Details</label>\n\n                        <textarea type=\"text\" className=\"w-full py-1 px-2 rounded bg-gray-100 border border-gray-300 resize-y\" \n                            value={description}\n                            onChange={e => setDescription(e.target.value)}\n                        ></textarea>\n                    </div>\n\n                    <div className=\"mb-4\">\n                        Reviewer\n\n                        <EmployeePicker employee={reviewer} onChange={setReviewer} />\n                    </div>\n\n                    <div className=\"flex justify-end\">\n                        <button className=\"mt-3 mb-1 text-sm py-1 px-6 rounded-full border border-blue-900 text-blue-900\"\n                            onClick={handleSave}\n                        >\n                            { isLoading ? 'Please Wait...' : 'Save Session' }\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default EditSession;","import { useState, useEffect } from \"react\";\nimport { useMutation } from \"react-query\";\nimport { defaultActivity, BASE_URL } from \"../constants\";\nimport { addMinutesToTime, confirmPassword, getTimeFromNumber } from \"../utils\";\n\nconst SessionTile = ({ session, employee, forAll = false, onEdit, onDelete }) => {\n    const [mouseOver, setMouseOver] = useState(false);\n    const [shiftSelected, setShiftSelected] = useState(false);\n    const [deleting, setDeleting] = useState(false);\n\n    let selfReview = session.reviewer._id === session.owner._id;\n    let asReviewer = false;\n    if (!selfReview && session.reviewer._id === employee._id)\n        asReviewer = true;\n\n    let rowStart = 1, rowEnd = 1;\n    let timeDiff = Math.round((session.time - 800) / 100) * 100;\n    let colStart = (timeDiff / 25) + 1;\n    colStart += ((session.time - 800) % 100) / 15;\n    let colEnd = colStart + (session.duration / 15);\n    let gridArea = `${rowStart} / ${colStart} / ${rowEnd} / ${colEnd}`;\n\n    const canDelete = mouseOver && shiftSelected;\n\n    let activity = session.activity.title;\n    if(session.activity._id === defaultActivity)\n        activity = session.title;\n\n    const onLeave = activity == \"Leave\";\n\n    useEffect(() => {\n        window.addEventListener(\"shift-released\", shiftReleased, false);\n        window.addEventListener(\"shift-selected\", onShiftSelected, false);\n        return () => {\n            console.log(\"Listener removed from tile\");\n            window.removeEventListener(\"shift-released\", shiftReleased, false);\n            window.removeEventListener(\"shift-selected\", onShiftSelected, false);\n        };\n    }, []);\n\n    const deleter = useMutation(() => fetch(`${BASE_URL}/Session/${session._id}`, {\n        method: \"DELETE\",\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    })\n    .then(res =>res.json()), {\n        onSuccess: () => {\n            setDeleting(false);\n            onDelete();\n        },\n    });\n\n    function shiftReleased(e){\n        console.log(\"Shift release captured\");\n        setShiftSelected(false);\n    }\n\n    function onShiftSelected(e){\n        console.log(\"Shift release captured\");\n        setShiftSelected(true);\n    }\n\n    async function handleDeleteSession(){\n        try {\n            await confirmPassword();\n            setDeleting(true);\n            deleter.mutate();\n        } catch (error) {\n        \n        }\n    }\n\n    async function handleEditSession(){\n        try {\n            await confirmPassword();\n            onEdit(session);\n        } catch (error) {\n        \n        }\n    }\n\n    return (\n        <div className={`session-card pointer-events-auto cursor-pointer ${forAll && 'for-all'} bg-primary text-white relative ${onLeave && 'on-leave'} ${deleting && 'animate-pulse'}`} style={{ gridArea }}\n            onMouseOver={(e) => setMouseOver(true)}\n            onMouseLeave={_ => setMouseOver(false)}\n            onClick={_ => canDelete ? handleDeleteSession() : handleEditSession()}\n        >\n            {(canDelete || deleting) &&\n                <div className=\"z-10 bg-red-500 absolute inset-0 flex items-center px-2 text-xs\">\n                    { deleting ? 'Removing Session...' : 'Remove Session' }\n                </div>\n            }\n\n            { !forAll && !onLeave && (\n                <div>\n                    <div className=\"truncate opacity-80\" style={{ fontSize: \"10px\" }}>\n                        {getTimeFromNumber(session.time)} - {addMinutesToTime(session.time, session.duration)}\n                    </div>\n                    <h3 className=\"mt-0.5\">\n                        {asReviewer &&\n                            <span>Review {session.owner.full_name}</span>\n                        }\n                        {!asReviewer && activity}\n                    </h3>\n                    {!selfReview && !asReviewer && (\n                        <div style={{ marginTop: \"0.15rem\", display: \"flex\", alignItems: \"center\", fontSize: \"13px\" }}>\n                            <img style={{ width: \"20px\", height: \"20px\", objectFit: \"cover\", borderRadius: \"50%\" }}\n                                title={'Reviewer: ' + session.reviewer.full_name} src={session.reviewer.dp} alt=\"\"\n                            />\n                        </div>\n                    )}\n                </div>\n            )}\n\n            { forAll && (\n                <div className=\"flex items-center justify-center h-full uppercase font-bold text-lg\">\n                    <span className=\"opacity-20\"\n                        dangerouslySetInnerHTML={{__html: activity.split('').join('</br>') }}\n                    ></span>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default SessionTile;","import { defaultActivity } from \"../constants\";\nimport { addMinutesToTime, formatLink, getTimeFromNumber } from \"../utils\";\n\nfunction SingleEmployeeSchedule({ employee, sessions, onClose }) {\n    const sortedSessions = sessions.sort((a, b) => a.time - b.time);\n    const dialogHeight = Math.min(750, window.innerHeight * 0.85);\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"rounded-lg overflow-y-auto w-full max-w-lg relative z-10\"\n                style={{maxHeight: dialogHeight}}\n            >\n                <div className=\"relative text-white py-3 px-4 flex items-center justify-between\">\n                    <div className=\"absolute inset-0 bg-blue-900s bg-primary opacity-70\"></div>\n                    <div className=\"flex items-center relative z-10\">\n                        <div className=\"border-2 border-opacity-80 relative w-8 h-8 rounded-full overflow-hidden\">\n                            <img className=\"absolute w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n                        </div>\n                        <h3 className=\"ml-3\">{employee.full_name}</h3>\n                    </div>\n\n                    <button className=\"relative z-10 p-1 hover:bg-white hover:bg-opacity-25 rounded-full\" onClick={onClose}>\n                        <svg className=\"w-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" /></svg>\n                    </button>\n                </div>\n\n                <div className=\"bg-white p-3\">\n                    {sortedSessions.map((session) => {\n                        let selfReview = session.reviewer._id === session.owner._id;\n                        let asReviewer = false;\n                        if (!selfReview && session.reviewer._id === employee._id)\n                            asReviewer = true;\n                        \n                        let activity = session.activity.title;\n                        if(session.activity._id === defaultActivity)\n                            activity = session.title;\n\n                        return (\n                            <div key={session._id} className=\"mb-3\">\n                                <div className=\"flex items-start\">\n                                    <span className=\"w-32 ml-2 mr-2 flex-shrink-0 text-blue-900\">\n                                        {getTimeFromNumber(session.time)} - {addMinutesToTime(session.time, session.duration)}\n                                    </span>\n\n                                    <div className=\"flex-1\">\n                                        <h3 className=\"font-semibold\">\n                                            {asReviewer && <span><span className=\"font-normal\">Review</span> {session.owner.full_name}</span>}\n                                            {!asReviewer && activity}\n                                        </h3>\n                                        <p className=\"text-sm opacity-75\"\n                                            dangerouslySetInnerHTML={{__html: formatLink(session.description) }}\n                                        >\n                                            \n                                        </p>\n\n                                        {!selfReview && !asReviewer && (\n                                            <div className=\"flex items-center mt-1\">\n                                                <img style={{ width: \"24px\", height: \"24px\", objectFit: \"cover\", borderRadius: \"50%\" }}\n                                                    title={'Reviewer: ' + session.reviewer.full_name} src={session.reviewer.dp} alt=\"\"\n                                                />\n\n                                                <span className=\"ml-3\">\n                                                    Reviewer: {session.reviewer.full_name}\n                                                </span>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default SingleEmployeeSchedule;","import { useEffect, useRef, useState } from \"react\";\nimport { BASE_URL } from \"../constants\";\n\nimport {\n    Combobox,\n    ComboboxInput,\n    ComboboxPopover,\n    ComboboxList,\n    ComboboxOption\n} from \"@reach/combobox\";\n\nfunction useCitySearch(searchTerm) {\n    const [cities, setCities] = useState([]);\n    const [loading, setLoading] = useState(false);\n  \n    useEffect(() => {\n      if (searchTerm.trim() !== \"\") {\n        let isFresh = true;\n        setLoading(true);\n        fetchCities(searchTerm).then((cities) => {\n          setLoading(false);\n          if (isFresh) setCities(cities);\n        });\n        return () => (isFresh = false);\n      }\n    }, [searchTerm]);\n  \n    return [cities, loading];\n}\n\nconst cache = {};\nfunction fetchCities(value) {\n  if (cache[value]) {\n    return Promise.resolve(cache[value]);\n  }\n  return fetch(`${BASE_URL}/Employee/search?q=${value}`)\n    .then((res) => res.json())\n    .then((result) => {\n      cache[value] = result;\n      return result;\n    });\n}\n\nfunction SpotlightSearch({placeholder = \"Search Employee\", onClose, onSelectUser}) {\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [cities, loading] = useCitySearch(searchTerm);\n    const inputRef = useRef(null);\n\n    useEffect(() => {\n        document.addEventListener(\"keyup\", onShiftUp, false);\n        return () => {\n            document.removeEventListener(\"keyup\", onShiftUp, false);\n        };\n    }, []);\n\n    function onShiftUp(e){\n        if(e.key === \"Escape\"){\n            if(inputRef.current.value.length)\n                setSearchTerm(\"\");\n            else\n                onClose();\n        };\n    }\n    \n    const handleSearchTermChange = (event) => {\n        if(event.target.value === inputRef.current.value)\n          setSearchTerm(event.target.value);\n    };\n\n    const handleSelect = (name) => {\n      const selectedEmployee= cities.find(({full_name}) => full_name === name);\n      onSelectUser({...selectedEmployee, fromSpotlight: true});\n    };\n\n    return (\n        <div className=\"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center\">\n            <div className=\"fixed inset-0\" onClick={onClose}>\n\n            </div>\n            <div className=\"overflow-hidden w-full max-w-sm relative z-10\">\n                <div className=\"\">\n                    <Combobox aria-label=\"Cities\" className=\"w-full\"\n                        onSelect={handleSelect}\n                    >\n                        <ComboboxInput\n                            ref={inputRef}\n                            className=\"w-full bg-white py-3 px-4 text-xl rounded border-none bg-transparent focus:outline-none placeholder-gray-300\"\n                            placeholder={placeholder}\n                            value={searchTerm}\n                            onChange={handleSearchTermChange}\n                            autoFocus\n                        />\n                        {cities && (\n                            <ComboboxPopover className=\"-mt-1 bg-white relative rounded-b overflow-hidden bg-white shadow-lg border z-20\">\n                                {cities.length > 0 ? (\n                                <ComboboxList>\n                                    {cities.map((employee) => {\n                                    return (\n                                        <ComboboxOption key={employee._id} value={employee.full_name}>\n                                            <div className=\"flex items-center py-2 px-4 border-b border-gray-100\">\n                                                <div className=\"border relative w-6 h-6 rounded-full overflow-hidden\">\n                                                    <img className=\"absolute w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n                                                </div>\n                                                <span className=\"ml-2 text-sm\">{employee.full_name}</span>\n                                            </div>\n                                        </ComboboxOption>\n                                    );\n                                    })}\n                                </ComboboxList>\n                                ) : (\n                                <span className=\"block p-3\">\n                                    { loading ? 'Loading...' : 'No results found' }\n                                </span>\n                                )}\n                            </ComboboxPopover>\n                        )}\n                    </Combobox>\n                </div>\n            </div>\n        </div>\n    );\n  }\n\nexport default SpotlightSearch;","import { useEffect, useState } from 'react';\nimport { useQuery } from 'react-query';\nimport AddSession from './AddSession';\nimport './App.css';\nimport EditSession from './EditSession';\nimport SessionTile from './SessionTile';\nimport SingleEmployeeSchedule from './SingleEmployeeSchedule';\nimport SpotlightSearch from './SpotlightSearch';\nimport { confirmPassword, getEmployeeSessions, getTimeFromRow } from '../utils';\nimport { BASE_URL } from '../constants';\n\nconst hours = 10;\n\nfunction ScheduleGrid({employees, sessions, onSessionsUpdated}){\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [newSession, setNewSession] = useState(null);\n  const [sessionBeingEdited, setSessionBeingEdited] = useState(null);\n  const [spotlightSearch, setSpotlightSearch] = useState(false);\n  const allEmployee = employees.find(({full_name}) => full_name === \"All\");\n  \n  useEffect(() => {\n    document.addEventListener(\"keyup\", onShiftUp, false);\n    document.addEventListener(\"keydown\", onShiftDown, false);\n    return () => {\n        document.removeEventListener(\"keydown\", onShiftDown, false);\n        document.removeEventListener(\"keyup\", onShiftUp, false);\n    };\n  }, []);\n\n  function onShiftUp(e){\n    if(e.key === \"Shift\"){\n      const userPermissionsInitEvent = new CustomEvent('shift-released');\n      window.dispatchEvent(userPermissionsInitEvent);\n    }\n\n    else if(!newSession && !sessionBeingEdited){\n      if(e.key === \"/\")\n          setSpotlightSearch(true);\n      else if(e.key === \"Escape\"){\n        if(selectedUser && selectedUser.fromSpotlight){\n          setSpotlightSearch(true);\n          setTimeout(() => setSelectedUser(null), 20);\n        }\n        else\n          setSelectedUser(null);\n      }\n    }\n  }\n\n  function onShiftDown(e){\n    if(e.key === \"Shift\"){\n      const userPermissionsInitEvent = new CustomEvent('shift-selected');\n      window.dispatchEvent(userPermissionsInitEvent);\n    }\n  }\n\n  async function handleSetNewSession(session){\n    try {\n      await confirmPassword();\n      setNewSession(session);\n    } catch (error) {\n      \n    }\n  }\n\n  function handleOnSaveSession(){\n    setNewSession(null);\n    setSessionBeingEdited(null);\n    onSessionsUpdated();\n  }\n\n  return (\n    <>\n      <div className=\"pointer-events-none fixed inset-0 h-screen flex\" style={{zIndex: 3}}>\n        <div className=\"employee-title cursor-pointer\">\n          <span className=\"opacity-0\">All</span>\n        </div>\n\n        <div className=\"flex-1 grid h-full\" style={{gap: \"1px\", gridTemplateColumns: `repeat(${hours * 4}, 1fr)`}}>\n          {\n            getEmployeeSessions(sessions, allEmployee._id).map((session, index) => {\n              return (\n                <SessionTile \n                  key={index}\n                  forAll \n                  employee={allEmployee._id} \n                  session={session} \n                  onEdit={setSessionBeingEdited}\n                  onDelete={handleOnSaveSession}\n                />\n              );\n            })\n          }\n        </div>\n      </div>\n      {\n        employees.filter(({full_name}) => full_name !== \"All\").map((e, i) => (\n          <div key={e._id} style={{display: 'flex', border: \"2px solid #f5f5f5\"}}>\n            <div className=\"employee-title hover:bg-gray-200 cursor-pointer\" onClick={() => setSelectedUser(e)}>\n              <img style={{width: \"20px\", height: \"20px\", objectFit: \"cover\", borderRadius: \"50%\", boxShadow: \"0 0 1px rgba(0, 0, 0, 0.26)\"}} \n                title={'Reviewer: ' + e.full_name} src={e.dp} alt=\"\" \n              />\n              <span>{e.full_name}</span>\n            </div>\n            <div style={{flex: 1, position: \"relative\"}}>\n              <div className=\"grid h-full\" style={{gap: \"1px\", gridTemplateColumns: `repeat(${hours * 4}, 1fr)`}}>\n                {\n                  Array(hours*4).fill(12).map((_, i) => (\n                    <div key={i} style={{display: 'flex', background: \"#eee\", position: 'relative'}}\n                      className=\"cursor-pointer\"\n                      // onClick={() => {console.log(\"Add new session: \", {employee: e, startTime: getTimeFromRow(i+1)});}}\n                      onClick={() => handleSetNewSession({employee: e, startTime: getTimeFromRow(i+1)})}\n                    >\n                      {/* <span style={{position: \"absolute\"}}>{ i + 1 }</span> */}\n                    </div>\n                  ))\n                }\n              </div>\n\n              <div className=\"absolute inset-0 grid pointer-events-none\" style={{background: \"rgba(0, 0, 0, 0.01)\", gap: \"1px\", gridTemplateColumns: `repeat(${hours * 4}, 1fr)`}}>\n                {\n                  getEmployeeSessions(sessions, e._id).map((session, index) => {\n                    return (\n                      <SessionTile \n                        key={index} \n                        employee={e} \n                        session={session} \n                        onEdit={setSessionBeingEdited}\n                        onDelete={handleOnSaveSession}\n                      />\n                    );\n                  })\n                }\n              </div>\n            </div>\n          </div>\n        ))}\n\n        { selectedUser && (\n            <SingleEmployeeSchedule \n              employee={selectedUser}\n              sessions={getEmployeeSessions(sessions, selectedUser._id)}\n              onClose={_ => setSelectedUser(null)}\n            />\n          )\n        }\n\n        { newSession && (\n            <AddSession \n              session={newSession}\n              onClose={_ => setNewSession(null)}\n              onSave={handleOnSaveSession}\n            />\n          )\n        }\n\n        { sessionBeingEdited && (\n            <EditSession \n              session={sessionBeingEdited}\n              onClose={_ => setSessionBeingEdited(null)}\n              onSave={handleOnSaveSession}\n            />\n          )\n        }\n        \n        { spotlightSearch && (\n            <SpotlightSearch \n              onSelectUser={user => {setSpotlightSearch(false); setSelectedUser(user)}}\n              onClose={_ => setSpotlightSearch(false)}\n            />\n          )\n        }\n    </>\n  );\n}\n\nfunction App() {\n  const {isLoading, error, data} = useQuery('employeeList', () =>\n    fetch(`${BASE_URL}/Employee`).then(res =>\n      res.json()\n    )\n  );\n\n  const sessions = useQuery('sessions', () =>\n    fetch(`${BASE_URL}/Session`).then(res =>\n      res.json()\n    )\n  );\n\n  if (isLoading || sessions.isLoading)\n    return <div className=\"bg-gradient-to-br from-blue-900 to-purple-500 text-white h-screen flex items-center justify-center text-lg tracking-wider\">LOADING...</div>;\n\n  return (\n    <div>\n      <div className=\"sticky top-0\" style={{display: 'flex', background: \"#fff\", color: \"white\", zIndex: 5}}>\n        <div style={{background:\"#333\", borderRight: \"1px solid #fff\", padding: '0.25rem', width: '90px', flexShrink: 0}}>\n          {/* Person / Time */}\n        </div>\n        <div style={{flex: 1, display: 'grid', gap: \"1px\", gridTemplateColumns: `repeat(${hours}, 1fr)`}}>\n          {\n            Array(hours).fill(11).map((_, i) => (\n              <div key={i} style={{display: 'flex', background: \"#333\", padding: '0.25rem'}}>\n                { 8 + i}:00\n              </div>\n            ))\n          }\n        </div>\n      </div>\n\n      <ScheduleGrid \n        employees={data.sort((a, b) => a.tin_number - b.tin_number)}\n        sessions={sessions.data} \n        onSessionsUpdated={() => sessions.refetch() }\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import { useState, useEffect } from \"react\";\nimport ColorThief from \"colorthief\";\n\nexport const getPalette = (url) => {\n  return new Promise((resolve, reject) => {\n    if (!url) {\n      reject();\n    }\n    const image = new Image();\n    image.src = url;\n    image.crossOrigin = 'Anonymous';\n\n    image.onload = function () {\n      try {\n        const colorThief = new ColorThief();\n        let result = colorThief.getColor(this, 25);\n        if(result)\n          result = `rgba(${result.join(',')},1)`;\n        else\n        result = \"rgba(67, 55, 201,1)\";\n        console.log(\"Main color: \", result);\n        resolve(result);\n      } catch (error) {\n        resolve(\"rgba(67, 55, 201, 1)\");\n      }\n    }\n  });\n}\n\nconst useColorThief = (url) => {\n  const [color, setColor] = useState(\"rgba(152, 167, 249, 1)\");\n\n  useEffect(() => {\n    getPalette(url)\n      .then(setColor)\n      .catch(() => setColor(\"rgba(67, 55, 201, 1)\"));\n  }, [url]);\n\n  return color;\n}\n\nexport default useColorThief;","import { defaultActivity } from \"../constants\";\nimport { addMinutesToTime, formatLink, getTimeFromNumber } from \"../utils\";\n\nconst SessionCard = ({session, employee}) => {\n    let selfReview = session.reviewer._id === session.owner._id;\n    let asReviewer = false;\n    if (!selfReview && session.reviewer._id === employee._id)\n        asReviewer = true;\n    \n    let activity = session.activity.title;\n    if(session.activity._id === defaultActivity)\n        activity = session.title;\n\n    return (\n        <div key={session._id} className=\"mb-3\">\n            <div className=\"pb-4 border-b overflow-hidden flexs items-start\">\n                <span className=\"flex-shrink-0 text-blue-900\">\n                    {getTimeFromNumber(session.time)} - {addMinutesToTime(session.time, session.duration)}\n                </span>\n\n                <div className=\"flex-1\">\n                    <h3 className=\"font-semibold\">\n                        {asReviewer && <span><span className=\"font-normal\">Review</span> {session.owner.full_name}</span>}\n                        {!asReviewer && activity}\n                    </h3>\n                    <p className=\"text-sm opacity-75\"\n                        dangerouslySetInnerHTML={{__html: formatLink(session.description) }}\n                    >\n                        \n                    </p>\n\n                    {!selfReview && !asReviewer && (\n                        <div className=\"flex items-center mt-1\">\n                            <img style={{ width: \"24px\", height: \"24px\", objectFit: \"cover\", borderRadius: \"50%\" }}\n                                title={'Reviewer: ' + session.reviewer.full_name} src={session.reviewer.dp} alt=\"\"\n                            />\n\n                            <span className=\"ml-3\">\n                                Reviewer: {session.reviewer.full_name}\n                            </span>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n \nexport default SessionCard;","import { useState } from \"react\";\nimport useColorThief from \"../useColorThief\";\nimport { getEmployeeSessions } from \"../utils\";\nimport SessionCard from \"./SessionCard\";\n\nconst EmployeeCard = ({employee, sessions}) => {\n    const employeeSessions = getEmployeeSessions(sessions, employee._id);\n    const [expanded, setExpanded] = useState(false);\n    const color = useColorThief(employee.dp);\n\n    if(expanded){\n        return (\n            <div className=\"fixed inset-0 z-50 overflow-y-auto bg-white text-black\">\n                <div className=\"sticky pt-24 -top-24 z-50 bg-indigo-700\">\n                    <img className=\"opacity-10 absolute top-0 left-0 w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n\n                    <div className=\"py-5 px-6\">    \n                        <img className=\"mb-2 border w-12 h-12 rounded-full object-cover\" src={employee.dp} alt=\"\" />\n                                \n                        <h2 className=\"text-white font-semibold text-2xl\">\n                            { employee.full_name.split(' ')[0] }'s Schedule\n                        </h2>\n                    </div>\n\n                    <button className=\"fixed top-5 right-4 rounded-full bg-white w-8 h-8 flex items-center justify-center border border-white\"\n                        onClick={() => setExpanded(false)}\n                    >\n                        <svg className=\"w-4\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"/></svg>\n                    </button>\n                </div>\n\n                <div className=\"pt-6 px-5 min-h-screen\">\n                    {\n                        employeeSessions.map((session, i) => (\n                            <div key={i} className=\"mb-4\">\n                                <SessionCard\n                                    employee={employee}\n                                    session={session}\n                                />\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"shadow-lg relative pt-20 pb-5 px-5 rounded-lg overflow-hidden sbg-white stext-gray-500 sbg-gradient-to-br from-blue-900 to-purple-500\"\n            // style={{background: color ? color : \"\"}}\n            onClick={() => setExpanded(true)}\n        >\n            <img className=\"opacity-10 absolute top-0 left-0 w-full h-full object-cover\" src={employee.dp} alt=\"\" />\n\n            <div className=\"absolute inset-0 bg-white opacity-20 backdrop-filter backdrop-blur-sm\"\n                // style={{background: color ? color : \"\"}}\n            ></div>\n\n            <div className=\"absolute w-8 h-8 rounded-full right-4 top-4 overflow-hidden grid grid-cols-2\">\n                <span className=\"h-4 transform -rotate-12 bg-white\" style={{background: color ? color : \"\"}}></span>\n                <span className=\"h-4 transform -rotate-12 bg-white\" style={{background: color ? color.replace(\"1)\", \"0.5)\") : \"\"}}></span>\n                <span className=\"h-4 transform rotate-12 bg-white\" style={{background: color ? color.replace(\"1)\", \"0.5)\") : \"\"}}></span>\n                <span className=\"h-4 transform -rotate-12 bg-white\" style={{background: color ? color : \"\"}}></span>\n            </div>\n\n            <div className=\"relative z-10\">\n                <img className=\"mb-2 border w-12 h-12 rounded-full object-cover\" src={employee.dp} alt=\"\" />\n\n                <h3 className=\"text-xl font-semibold\">\n                    {employee.full_name}\n                </h3>\n                <p className=\"opacity-70\">\n                    { employeeSessions.length } Sessions\n                </p>\n            </div>\n        </div>\n    );\n}\n \nexport default EmployeeCard;","import { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { BASE_URL } from \"../constants\";\nimport EmployeeCard from \"./EmployeeCard\";\n\nconst MobileApp = () => {\n    const [searching, setSearching] = useState(false);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n\n    const employees = useQuery('employeeList', () =>\n        fetch(`${BASE_URL}/Employee`).then(res =>\n            res.json()\n        )\n    );\n\n    const sessions = useQuery('sessions', () =>\n        fetch(`${BASE_URL}/Session`).then(res =>\n            res.json()\n        )\n    );\n\n    if (employees.isLoading || sessions.isLoading) return <div className=\"bg-gradient-to-br from-blue-900 to-purple-500 text-white h-screen flex items-center justify-center text-lg tracking-wider\">LOADING...</div>;\n\n    let employeeList = employees.data.filter(({full_name}) => full_name !== \"All\");\n    if(searchQuery.length){\n        employeeList = employeeList.filter(({full_name}) => full_name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1)\n            .map((e) => ({...e, searchIndex: e.full_name.toLowerCase().indexOf(searchQuery.toLowerCase())}))\n            .sort((a, b) => a.searchIndex - b.searchIndex);\n    }\n\n    return (\n        <div className=\"h-screen overflow-y-auto bg-gray-200s bg-gradient-to-br from-blue-900 to-purple-500 text-white\">\n            <div className=\"py-5 px-6 sticky top-0 z-50 bg-indigo-700 flex items-center justify-between\">\n                { !searching && <>\n                        <h2 className=\"font-semibold text-3xl\">\n                            All Sessions\n                        </h2>\n\n                        <button className=\"rounded-full bg-white w-10 h-10 flex items-center justify-center border border-white\"\n                            onClick={() => setSearching(true)}\n                        >\n                            <svg className=\"w-6\" viewBox=\"0 0 24 24\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>\n                        </button>\n                    </>\n                }\n\n                { searching && <>\n                        <div className=\"flex-1 flex bg-white rounded px-2\">\n                            <svg className=\"w-6 opacity-30\" viewBox=\"0 0 24 24\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>\n                            \n                            <input autoFocus className=\"placeholder-gray-400 outline-none border-none ml-2 flex-1 text-black text-xl\" type=\"text\" placeholder=\"Type to search\" \n                                value={searchQuery}\n                                onChange={e => setSearchQuery(e.target.value)}\n                            />\n\n                            <button \n                                className={`ml-auto rounded-full bg-white w-10 h-10 flex items-center justify-center border border-white ${!searchQuery.length && 'pointer-events-none opacity-0'}`}\n                                onClick={() => setSearchQuery(\"\")}\n                            >\n                                <svg className=\"w-4\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"/></svg>\n                            </button>\n                        </div>\n\n                        <button className=\"bg-transparent py-2 px-2\"\n                            onClick={() => {setSearchQuery(\"\"); setSearching(false);}}>\n                            Cancel\n                        </button>\n                    </>\n                }\n            </div>\n\n            <div className=\"pt-4 px-5\">\n                {\n                    employeeList.map((e, i) => (\n                        <div key={i} className=\"mb-4\">\n                            <EmployeeCard \n                                employee={e}\n                                sessions={sessions.data}\n                            />\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default MobileApp;","import { useState, useEffect } from \"react\";\n\nconst useMediaQuery = (query) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n    const listener = () => setMatches(media.matches);\n    window.addEventListener(\"resize\", listener);\n    return () => window.removeEventListener(\"resize\", listener);\n  }, [matches, query]);\n\n  return matches;\n}\n\nexport default useMediaQuery;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport DesktopApp from './DesktopApp';\nimport MobileApp from './MobileApp';\nimport useMediaQuery from './useMediaQuery';\nimport { QueryClient, QueryClientProvider } from 'react-query'\n \nconst queryClient = new QueryClient();\n\nfunction Schedule() {\n  const isMobile = useMediaQuery('(max-width: 600px)');\n\n  if(isMobile) \n    return (\n      <MobileApp />\n    )\n  \n  return (\n    <DesktopApp />\n  )\n}\n\nReactDOM.render(\n  // <React.StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <Schedule />\n     </QueryClientProvider>\n  // </React.StrictMode>,\n  , document.getElementById('root')\n);"],"sourceRoot":""}