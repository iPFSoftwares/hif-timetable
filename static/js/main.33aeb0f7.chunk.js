(this["webpackJsonphif-timetable"]=this["webpackJsonphif-timetable"]||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(16),c=n.n(r),i=n(4),a=n(9),l=n(37),o=function(e){var t=e.toString().split(""),n=Object(l.a)(t).reverse().slice(2).reverse().join(""),s=t.slice(-2).join("");return"".concat(n.padStart(2,"0"),":").concat(s.padStart(2,"0"))},d=function(e){var t=Object(i.a)(e,2),n=t[0],s=t[1];n=n.toString().padStart(2,"0"),s=s.toString().padStart(2,"0");var r=o(Number("".concat(n).concat(s)));return Number(r.replace(":",""))},u=function(e,t){var n=o(e).split(":"),s=Object(i.a)(n,2),r=s[0],c=s[1],a=o(t).split(":"),l=Object(i.a)(a,2);return 60*(r-l[0])+(c-l[1])},j=function(e,t){var n=o(e).split(":"),s=Object(i.a)(n,2),r=s[0],c=s[1],a=Number(c)+Number(t),l=Math.floor(a/60);return r=(Number(r)+l).toString(),c=(a%60).toString(),"".concat(r.padStart(2,"0"),":").concat(c.padStart(2,"0"))},b=function(e){var t=e-1,n=100*(Math.floor(t/4)+8);n+=15*Math.floor(t%4);var s=o(n).split(":"),r=Object(i.a)(s,2),c=r[0],a=r[1];return"".concat(c.padStart(2,"0"),":").concat(a)},m=n(10),x=n(0);function h(e){var t=Object(s.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(s.useEffect)((function(){if(""!==e.trim()){var t=!0;return function(e){if(f[e])return Promise.resolve(f[e]);return fetch("https://walterkimaro.com/api/Employee/search?q="+e).then((function(e){return e.json()})).then((function(t){return f[e]=t,t}))}(e).then((function(e){t&&c(e)})),function(){return t=!1}}}),[e]),r}var f={};var p=function(e){var t=e.placeholder,n=void 0===t?"Type to search":t,r=e.onChange,c=Object(s.useState)(""),a=Object(i.a)(c,2),l=a[0],o=a[1],d=h(l);return Object(x.jsxs)(m.a,{"aria-label":"Cities",className:"w-full",onSelect:function(e){var t=d.find((function(t){return t.full_name===e}));r(t)},children:[Object(x.jsx)(m.b,{className:"w-full py-1 px-2 rounded border border-gray-300 focus:outline-none bg-gray-100",placeholder:n,onChange:function(e){o(e.target.value)},autoFocus:!0}),d&&Object(x.jsx)(m.e,{className:"rounded overflow-hidden bg-white shadow-lg border z-20",children:d.length>0?Object(x.jsx)(m.c,{children:d.map((function(e){return Object(x.jsx)(m.d,{value:e.full_name,children:Object(x.jsxs)("div",{className:"flex items-center px-2 border-t border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("div",{className:"border relative w-6 h-6 rounded-full overflow-hidden",children:Object(x.jsx)("img",{className:"absolute w-full h-full object-cover",src:e.dp,alt:""})}),Object(x.jsx)("span",{className:"ml-2 text-sm",children:e.full_name})]})},e._id)}))}):Object(x.jsx)("span",{className:"block p-3",children:"No results found"})})]})};function v(e){var t=Object(s.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(s.useEffect)((function(){if(""!==e.trim()){var t=!0;return function(e){if(O[e])return Promise.resolve(O[e]);return fetch("https://walterkimaro.com/api/SessionType/search?q="+e).then((function(e){return e.json()})).then((function(t){return O[e]=t,t}))}(e).then((function(e){t&&c(e)})),function(){return t=!1}}}),[e]),r}var O={};var g=function(e){var t=e.placeholder,n=void 0===t?"Type to search":t,r=e.onChange,c=Object(s.useState)(""),a=Object(i.a)(c,2),l=a[0],o=a[1],d=v(l);return Object(x.jsxs)(m.a,{"aria-label":"Cities",className:"w-full",onSelect:function(e){var t=d.find((function(t){return t.title===e}));r(t)},children:[Object(x.jsx)(m.b,{className:"w-full py-1 px-2 rounded border border-gray-300 focus:outline-none bg-gray-100",placeholder:n,onChange:function(e){o(e.target.value)},autoFocus:!0}),d&&Object(x.jsx)(m.e,{className:"rounded overflow-hidden bg-white shadow-lg border z-20",children:d.length>0?Object(x.jsx)(m.c,{children:d.map((function(e){return Object(x.jsx)(m.d,{className:"px-3 py-2",value:e.title},e._id)}))}):Object(x.jsx)("span",{className:"block p-3",children:"No results found"})})]})},y=[8,9,10,11,12,13,14,15,16],N=[0,15,30,45];function w(e){var t=e.employee,n=e.onChange,r=Object(s.useState)(t),c=Object(i.a)(r,2),a=c[0],l=c[1];return Object(s.useEffect)((function(){a&&a!==t&&n(a)}),[a]),Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsxs)("div",{className:"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("div",{className:"border relative w-6 h-6 rounded-full overflow-hidden",children:Object(x.jsx)("img",{className:"absolute w-full h-full object-cover",src:a.dp,alt:""})}),Object(x.jsx)("span",{className:"ml-2 text-sm",children:a.full_name}),Object(x.jsx)("button",{className:"ml-auto text-blue-900 text-xs p-0",onClick:function(){return l(null)},children:"Change"})]}),!a&&Object(x.jsx)(p,{onChange:l})]})}function S(e){var t=e.activity,n=e.onChange,r=Object(s.useState)(t),c=Object(i.a)(r,2),a=c[0],l=c[1];return Object(s.useEffect)((function(){a&&a!==t&&n(a)}),[a]),Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsxs)("div",{className:"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("span",{className:"ml-2 text-sm",children:a.title}),Object(x.jsx)("button",{className:"ml-auto text-blue-900 text-xs p-0",onClick:function(){return l(null)},children:"Change"})]}),!a&&Object(x.jsx)(g,{onChange:l})]})}var C=function(e){var t=e.session,n=e.onClose,r=e.onSave,c=t.duration||60,l=Object(s.useState)(t.employee),o=Object(i.a)(l,2),b=o[0],m=o[1],h=Object(s.useState)(t.employee),f=Object(i.a)(h,2),p=f[0],v=f[1],O=Object(s.useState)(t.startTime.split(":").map((function(e){return Number(e)}))),g=Object(i.a)(O,2),C=g[0],k=g[1],E=Object(s.useState)([8,30]),_=Object(i.a)(E,2),z=_[0],L=_[1],T=Object(s.useState)(""),R=Object(i.a)(T,2),M=R[0],F=R[1],A=Object(s.useState)(null),P=Object(i.a)(A,2),D=P[0],B=P[1],J=Object(a.useMutation)((function(e){return fetch("https://walterkimaro.com/api/Session",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}),{onSuccess:function(){r()}}),Q=J.isLoading,I=J.isError,q=J.error;return J.isSuccess,J.data,Object(s.useEffect)((function(){L(j(Number(t.startTime.replace(":","")),c).split(":").map((function(e){return Number(e)})))}),[]),Object(x.jsxs)("div",{className:"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center",children:[Object(x.jsx)("div",{className:"fixed inset-0",onClick:n}),Object(x.jsxs)("div",{className:"rounded-md overflow-hidden w-full max-w-sm relative z-10",children:[Object(x.jsxs)("div",{className:"bg-blue-900 text-white py-3 px-4 flex items-center justify-between",children:[Object(x.jsx)("h3",{className:"font-semibold",children:"Add Session"}),Object(x.jsx)("button",{className:"p-1 hover:bg-white hover:bg-opacity-25 rounded-full",onClick:n,children:Object(x.jsx)("svg",{className:"w-5",fill:"currentColor",viewBox:"0 0 24 24",children:Object(x.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})})})]}),Object(x.jsxs)("div",{className:"bg-white py-3 px-4",children:[I&&Object(x.jsxs)("span",{children:["Error saving session: ",q]}),Object(x.jsxs)("div",{className:"mb-3",children:["Employee",Object(x.jsx)(w,{employee:b,onChange:m})]}),Object(x.jsxs)("div",{className:"mb-4",children:["Activity",Object(x.jsx)(S,{activity:D,onChange:B})]}),Object(x.jsx)("div",{className:"mb-4",children:Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsxs)("div",{className:"flex-1 flex-shrink-0 mr-2",children:[Object(x.jsx)("label",{children:"Start Time"}),Object(x.jsxs)("div",{className:"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("select",{className:"",value:C[0],onChange:function(e){return k([e.target.value,C[1]])},children:y.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))}),Object(x.jsx)("span",{className:"mx-3 text-gray-400",children:"|"}),Object(x.jsx)("select",{className:"px-",value:C[1],onChange:function(e){return k([C[0],e.target.value])},children:N.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))})]})]}),Object(x.jsxs)("div",{className:"flex-1 flex-shrink-0",children:[Object(x.jsx)("label",{children:"End time"}),Object(x.jsxs)("div",{className:"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("select",{className:"",value:z[0],onChange:function(e){return L([e.target.value,z[1]])},children:y.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))}),Object(x.jsx)("span",{className:"mx-3 text-gray-400",children:"|"}),Object(x.jsx)("select",{className:"px-",value:z[1],onChange:function(e){return L([z[0],e.target.value])},children:N.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))})]})]})]})}),Object(x.jsxs)("div",{className:"mb-2",children:[Object(x.jsx)("label",{children:"Session Details"}),Object(x.jsx)("textarea",{type:"text",className:"w-full py-1 px-2 rounded bg-gray-100 border border-gray-300 resize-y",value:M,onChange:function(e){return F(e.target.value)}})]}),Object(x.jsxs)("div",{className:"mb-4",children:["Reviewer",Object(x.jsx)(w,{employee:p,onChange:v})]}),Object(x.jsx)("div",{className:"flex justify-end",children:Object(x.jsx)("button",{className:"mt-3 mb-1 text-sm py-1 px-6 rounded-full border border-blue-900 text-blue-900",onClick:function(){var e=d(C),t=d(z),n={time:e,duration:u(t,e),activity:D._id,description:M,owner:b._id,reviewer:p._id};console.log("Save session:",n),J.mutate(n)},children:Q?"Please Wait...":"Save Session"})})]})]})]})},k=(n(51),[8,9,10,11,12,13,14,15,16]),E=[0,15,30,45];function _(e){var t=e.employee,n=e.onChange,r=Object(s.useState)(t),c=Object(i.a)(r,2),a=c[0],l=c[1];return Object(s.useEffect)((function(){a&&a!==t&&n(a)}),[a]),Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsxs)("div",{className:"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("div",{className:"border relative w-6 h-6 rounded-full overflow-hidden",children:Object(x.jsx)("img",{className:"absolute w-full h-full object-cover",src:a.dp,alt:""})}),Object(x.jsx)("span",{className:"ml-2 text-sm",children:a.full_name}),Object(x.jsx)("button",{className:"ml-auto text-blue-900 text-xs p-0",onClick:function(){return l(null)},children:"Change"})]}),!a&&Object(x.jsx)(p,{onChange:l})]})}function z(e){var t=e.activity,n=e.onChange,r=Object(s.useState)(t),c=Object(i.a)(r,2),a=c[0],l=c[1];return Object(s.useEffect)((function(){a&&a!==t&&n(a)}),[a]),Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsxs)("div",{className:"flex items-center px-2 rounded bg-gray-200 bg-opacity-25 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("span",{className:"ml-2 text-sm",children:a.title}),Object(x.jsx)("button",{className:"ml-auto text-blue-900 text-xs p-0",onClick:function(){return l(null)},children:"Change"})]}),!a&&Object(x.jsx)(g,{onChange:l})]})}var L=function(e){var t=e.session,n=e.onClose,r=e.onSave,c=t.duration,l=Object(s.useState)(t.owner),b=Object(i.a)(l,2),m=b[0],h=b[1],f=Object(s.useState)(t.reviewer),p=Object(i.a)(f,2),v=p[0],O=p[1],g=Object(s.useState)(o(t.time).split(":").map((function(e){return Number(e)}))),y=Object(i.a)(g,2),N=y[0],w=y[1],S=Object(s.useState)([8,30]),C=Object(i.a)(S,2),L=C[0],T=C[1],R=Object(s.useState)(t.description),M=Object(i.a)(R,2),F=M[0],A=M[1],P=Object(s.useState)(t.activity),D=Object(i.a)(P,2),B=D[0],J=D[1],Q=Object(a.useMutation)((function(e){return fetch("https://walterkimaro.com/api/Session/"+t._id,{method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}),{onSuccess:function(){r()}}),I=Q.isLoading,q=Q.isError,U=Q.error;return Q.isSuccess,Q.data,Object(s.useEffect)((function(){var e=o(t.time).replace(":","");T(j(Number(e),c).split(":").map((function(e){return Number(e)})))}),[]),Object(x.jsxs)("div",{className:"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center",children:[Object(x.jsx)("div",{className:"fixed inset-0",onClick:n}),Object(x.jsxs)("div",{className:"rounded-md overflow-hidden w-full max-w-sm relative z-10",children:[Object(x.jsxs)("div",{className:"bg-blue-900 text-white py-3 px-4 flex items-center justify-between",children:[Object(x.jsx)("h3",{className:"font-semibold",children:"Edit Session"}),Object(x.jsx)("button",{className:"p-1 hover:bg-white hover:bg-opacity-25 rounded-full",onClick:n,children:Object(x.jsx)("svg",{className:"w-5",fill:"currentColor",viewBox:"0 0 24 24",children:Object(x.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})})})]}),Object(x.jsxs)("div",{className:"bg-white py-3 px-4",children:[q&&Object(x.jsxs)("span",{children:["Error saving session: ",U]}),Object(x.jsxs)("div",{className:"mb-3",children:["Employee",Object(x.jsx)(_,{employee:m,onChange:h})]}),Object(x.jsxs)("div",{className:"mb-4",children:["Activity",Object(x.jsx)(z,{activity:B,onChange:J})]}),Object(x.jsx)("div",{className:"mb-4",children:Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsxs)("div",{className:"flex-1 flex-shrink-0 mr-2",children:[Object(x.jsx)("label",{children:"Start Time"}),Object(x.jsxs)("div",{className:"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("select",{className:"",value:N[0],onChange:function(e){return w([e.target.value,N[1]])},children:k.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))}),Object(x.jsx)("span",{className:"mx-3 text-gray-400",children:"|"}),Object(x.jsx)("select",{className:"px-",value:N[1],onChange:function(e){return w([N[0],e.target.value])},children:E.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))})]})]}),Object(x.jsxs)("div",{className:"flex-1 flex-shrink-0",children:[Object(x.jsx)("label",{children:"End time"}),Object(x.jsxs)("div",{className:"inline-flex items-center px-2 rounded bg-gray-100 border border-gray-300",style:{height:"34px"},children:[Object(x.jsx)("select",{className:"",value:L[0],onChange:function(e){return T([e.target.value,L[1]])},children:k.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))}),Object(x.jsx)("span",{className:"mx-3 text-gray-400",children:"|"}),Object(x.jsx)("select",{className:"px-",value:L[1],onChange:function(e){return T([L[0],e.target.value])},children:E.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e)}))})]})]})]})}),Object(x.jsxs)("div",{className:"mb-2",children:[Object(x.jsx)("label",{children:"Session Details"}),Object(x.jsx)("textarea",{type:"text",className:"w-full py-1 px-2 rounded bg-gray-100 border border-gray-300 resize-y",value:F,onChange:function(e){return A(e.target.value)}})]}),Object(x.jsxs)("div",{className:"mb-4",children:["Reviewer",Object(x.jsx)(_,{employee:v,onChange:O})]}),Object(x.jsx)("div",{className:"flex justify-end",children:Object(x.jsx)("button",{className:"mt-3 mb-1 text-sm py-1 px-6 rounded-full border border-blue-900 text-blue-900",onClick:function(){var e=d(N),t=d(L),n={time:e,duration:u(t,e),activity:B._id,description:F,owner:m._id,reviewer:v._id};console.log("Save session:",n),Q.mutate(n)},children:I?"Please Wait...":"Save Session"})})]})]})]})},T=function(e){var t=e.session,n=e.employee,r=e.onEdit,c=e.onDelete,l=Object(s.useState)(!1),d=Object(i.a)(l,2),u=d[0],b=d[1],m=Object(s.useState)(!1),h=Object(i.a)(m,2),f=h[0],p=h[1],v=Object(s.useState)(!1),O=Object(i.a)(v,2),g=O[0],y=O[1],N=t.reviewer._id===t.owner._id,w=!1;N||t.reviewer._id!==n._id||(w=!0);var S=100*Math.round((t.time-800)/100)/25+1,C=(S+=(t.time-800)%100/15)+t.duration/15,k="".concat(1," / ").concat(S," / ").concat(1," / ").concat(C),E=u&&f;Object(s.useEffect)((function(){return window.addEventListener("shift-released",z,!1),window.addEventListener("shift-selected",L,!1),function(){console.log("Listener removed from tile"),window.removeEventListener("shift-released",z,!1),window.removeEventListener("shift-selected",L,!1)}}),[]);var _=Object(a.useMutation)((function(){return fetch("https://walterkimaro.com/api/Session/"+t._id,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}),{onSuccess:c});function z(e){console.log("Shift release captured"),p(!1)}function L(e){console.log("Shift release captured"),p(!0)}return Object(x.jsxs)("div",{className:"session-card pointer-events-auto cursor-pointer bg-blue-900 text-white relative ".concat(g&&"animate-pulse"),style:{gridArea:k},onMouseOver:function(e){return b(!0)},onMouseLeave:function(e){return b(!1)},onClick:function(e){return E?(y(!0),void _.mutate()):r(t)},children:[(E||g)&&Object(x.jsx)("div",{className:"z-10 bg-red-500 absolute inset-0 flex items-center px-2 text-xs",children:g?"Removing Session...":"Remove Session"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"truncate opacity-50",style:{fontSize:"10px"},children:[o(t.time)," - ",j(t.time,t.duration)]}),Object(x.jsxs)("h3",{className:"mt-0.5",children:[w&&Object(x.jsxs)("span",{children:["Review ",t.owner.full_name]}),!w&&t.activity.title]}),!N&&!w&&Object(x.jsx)("div",{style:{marginTop:"0.15rem",display:"flex",alignItems:"center",fontSize:"13px"},children:Object(x.jsx)("img",{style:{width:"20px",height:"20px",objectFit:"cover",borderRadius:"50%"},title:"Reviewer: "+t.reviewer.full_name,src:t.reviewer.dp,alt:""})})]})]})};var R=function(e){var t=e.employee,n=e.sessions,s=e.onClose,r=n.sort((function(e,t){return e.time-t.time}));return Object(x.jsxs)("div",{className:"fixed overflow-y-auto inset-0 bg-black bg-opacity-75 z-10 flex items-center justify-center",children:[Object(x.jsx)("div",{className:"fixed inset-0",onClick:s}),Object(x.jsxs)("div",{className:"rounded-lg overflow-hidden w-full max-w-lg relative z-10",children:[Object(x.jsxs)("div",{className:"bg-blue-900 text-white py-3 px-4 flex items-center justify-between",children:[Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsx)("div",{className:"border relative w-8 h-8 rounded-full overflow-hidden",children:Object(x.jsx)("img",{className:"absolute w-full h-full object-cover",src:t.dp,alt:""})}),Object(x.jsx)("h3",{className:"ml-3",children:t.full_name})]}),Object(x.jsx)("button",{className:"p-1 hover:bg-white hover:bg-opacity-25 rounded-full",onClick:s,children:Object(x.jsx)("svg",{className:"w-5",fill:"currentColor",viewBox:"0 0 24 24",children:Object(x.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})})})]}),Object(x.jsx)("div",{className:"bg-white p-3",children:r.map((function(e){var n=e.reviewer._id===e.owner._id,s=!1;return n||e.reviewer._id!==t._id||(s=!0),Object(x.jsx)("div",{className:"mb-3",children:Object(x.jsxs)("div",{className:"flex items-start",children:[Object(x.jsxs)("span",{className:"w-32 ml-2 mr-2 flex-shrink-0 text-blue-900",children:[o(e.time)," - ",j(e.time,e.duration)]}),Object(x.jsxs)("div",{className:"flex-1",children:[Object(x.jsxs)("h3",{className:"font-semibold",children:[s&&Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{className:"font-normal",children:"Review"})," ",e.owner.full_name]}),!s&&e.activity.title]}),Object(x.jsx)("p",{className:"text-sm opacity-75",children:e.description}),!n&&!s&&Object(x.jsxs)("div",{className:"flex items-center mt-1",children:[Object(x.jsx)("img",{style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"50%"},title:"Reviewer: "+e.reviewer.full_name,src:e.reviewer.dp,alt:""}),Object(x.jsxs)("span",{className:"ml-3",children:["Reviewer: ",e.reviewer.full_name]})]})]})]})},e._id)}))})]})]})};function M(e){var t=e.employees,n=e.sessions,r=e.onSessionsUpdated,c=Object(s.useState)(null),a=Object(i.a)(c,2),l=a[0],o=a[1],d=Object(s.useState)(null),u=Object(i.a)(d,2),j=u[0],m=u[1],h=Object(s.useState)(null),f=Object(i.a)(h,2),p=f[0],v=f[1];function O(e){if("Shift"===e.key){var t=new CustomEvent("shift-released");window.dispatchEvent(t)}}function g(e){if("Shift"===e.key){var t=new CustomEvent("shift-selected");window.dispatchEvent(t)}}function y(e){return n&&n.length?n.filter((function(t){return t.owner._id===e||t.reviewer._id===e})):[]}function N(){m(null),v(null),r()}return Object(s.useEffect)((function(){return document.addEventListener("keyup",O,!1),document.addEventListener("keydown",g,!1),function(){document.removeEventListener("keydown",g,!1),document.removeEventListener("keyup",O,!1)}}),[]),Object(x.jsxs)(x.Fragment,{children:[t.map((function(e,t){return Object(x.jsxs)("div",{style:{display:"flex",border:"2px solid #f5f5f5"},children:[Object(x.jsxs)("div",{className:"employee-title hover:bg-gray-200 cursor-pointer",onClick:function(){return o(e)},children:[Object(x.jsx)("img",{style:{width:"20px",height:"20px",objectFit:"cover",borderRadius:"50%",boxShadow:"0 0 1px rgba(0, 0, 0, 0.26)"},title:"Reviewer: "+e.full_name,src:e.dp,alt:""}),Object(x.jsx)("span",{children:e.full_name})]}),Object(x.jsxs)("div",{style:{flex:1,position:"relative"},children:[Object(x.jsx)("div",{style:{height:"100%",display:"grid",gap:"1px",gridTemplateColumns:"repeat(".concat(32,", 1fr)")},children:Array(32).fill(12).map((function(t,n){return Object(x.jsx)("div",{style:{display:"flex",background:"#ddd",position:"relative"},className:"cursor-pointer",onClick:function(){return m({employee:e,startTime:b(n+1)})}},n)}))}),Object(x.jsx)("div",{className:"absolute inset-0 grid pointer-events-none",style:{background:"rgba(0, 0, 0, 0.01)",gap:"1px",gridTemplateColumns:"repeat(".concat(32,", 1fr)")},children:y(e._id).map((function(t,n){return Object(x.jsx)(T,{employee:e,session:t,onEdit:v,onDelete:N},n)}))})]})]},e._id)})),l&&Object(x.jsx)(R,{employee:l,sessions:y(l._id),onClose:function(e){return o(null)}}),j&&Object(x.jsx)(C,{session:j,onClose:function(e){return m(null)},onSave:N}),p&&Object(x.jsx)(L,{session:p,onClose:function(e){return v(null)},onSave:N})]})}var F=function(){var e=Object(a.useQuery)("employeeList",(function(){return fetch("https://walterkimaro.com/api/Employee").then((function(e){return e.json()}))})),t=e.isLoading,n=(e.error,e.data),s=Object(a.useQuery)("sessions",(function(){return fetch("https://walterkimaro.com/api/Session").then((function(e){return e.json()}))}));return t||s.isLoading?"Loading...":Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{style:{display:"flex",background:"#fff",color:"white",position:"sticky",top:0,zIndex:1},children:[Object(x.jsx)("div",{style:{background:"#333",borderRight:"1px solid #fff",padding:"0.25rem",width:"90px",flexShrink:0}}),Object(x.jsx)("div",{style:{flex:1,display:"grid",gap:"1px",gridTemplateColumns:"repeat(".concat(8,", 1fr)")},children:Array(8).fill(11).map((function(e,t){return Object(x.jsxs)("div",{style:{display:"flex",background:"#333",padding:"0.25rem"},children:[8+t,":00"]},t)}))})]}),Object(x.jsx)(M,{employees:n,sessions:s.data,onSessionsUpdated:function(){return s.refetch()}})]})},A=new a.QueryClient;c.a.render(Object(x.jsx)(a.QueryClientProvider,{client:A,children:Object(x.jsx)(F,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.33aeb0f7.chunk.js.map